!function(){"use strict";angular.module("afrmApp",["ngMaterial","ngAnimate","ngRoute","angular.filter","md.data.table"]).config(["$mdThemingProvider","$mdDateLocaleProvider",function(n,o){o.formatDate=function(n){return moment(n).format("YYYY-MM-DD")},n.theme("forest").primaryPalette("blue").accentPalette("teal").warnPalette("red").backgroundPalette("grey")}])}(),function(){"use strict";function n(n,o,e){o.serverUrl="http://localhost:3000/",n.menu=function(n){e.path(n)}}n.$inject=["$scope","$rootScope","$location"],angular.module("afrmApp").controller("MainController",n)}(),function(){"use strict";function n(n,o){n.when("/",{templateUrl:"app/components/home/home.html",controller:"HomeController"}).when("/login",{templateUrl:"app/components/login/login.html",controller:"LoginController"}).when("/solicitacao",{templateUrl:"app/components/solicitation/solicitation.html",controller:"SolicitationController"}).when("/empresas",{templateUrl:"app/components/companies/companies.html",controller:"CompaniesController"}).when("/estagios",{templateUrl:"app/components/internships/internships.html",controller:"InternshipsController"}).when("/registro",{templateUrl:"app/components/login/register.html",controller:"RegisterController"}).otherwise({redirectTo:"/"}),o.html5Mode(!0)}angular.module("afrmApp").config(["$routeProvider","$locationProvider",n])}(),function(){"use strict";function n(n,o,e){n.showDialog=function(e){o.show({controller:"ManageCompanyController",templateUrl:"app/shared/templates/modals/manage-company.html",parent:angular.element(document.body),locals:{company:e||null},clickOutsideToClose:!0}).then(function(o,e){o&&(e?n.companies.push(o):n.companies.forEach(function(n){n._id===o._id&&(n=o)}))},function(){})},function(){e.get().success(function(o){n.companies=o}).error(function(n){console.log(n)})}()}angular.module("afrmApp").controller("CompaniesController",n),n.$inject=["$scope","$mdDialog","companiesService"]}(),function(){"use strict";function n(n){n.approveSolicitation=function(){},n.insertSolicitation=function(){}}angular.module("afrmApp").controller("HomeController",n),n.$inject=["$scope"]}(),function(){"use strict";function n(n,o){n.showDialog=function(n){o.show({controller:"InternshipDialogController",templateUrl:"app/shared/templates/modals/internship-dialog.html",parent:angular.element(document.body),locals:{internship:n||null},clickOutsideToClose:!0}).then(function(){},function(){})},function(){n.status=["Aprovado","Em andamento","Aguardando aprovação"],n.internships=[{company:"HP",student:"Felipe","class":"Ciencia da comp.",begin:"10/06/2016",end:"10/12/2016",status:!0},{company:"HP",student:"Felipe","class":"Ciencia da comp.",begin:"10/06/2016",end:"10/12/2016",status:!0},{company:"Pling",student:"Teste","class":"Eng da comp.",begin:"10/06/2016",end:"10/12/2016",status:!1}]}()}angular.module("afrmApp").controller("InternshipsController",n),n.$inject=["$scope","$mdDialog"]}(),function(){"use strict";function n(n,o){n.login=function(n,e){var t={email:n,password:e};o.login(t).success(function(n){n&&window.sessionStorage.setItem("TOKEN",n)}).error(function(n){console.log(n)})},function(){console.log("logincontroller")}()}angular.module("afrmApp").controller("LoginController",n),n.$inject=["$scope","credentialsService"]}(),function(){"use strict";function n(n,o,e,t,r){n.createAccount=function(n){o.create(n).success(function(n){n&&(t.show(t.simple().textContent("Usuário criado com sucesso").position("bottom").hideDelay(3e3)),r(function(){e("/login")},3e3))}).error(function(n){console.log(n)})}}angular.module("afrmApp").controller("RegisterController",n),n.$inject=["$scope","credentialsService","$location","$mdToast","$timeout"]}(),function(){"use strict";function n(n){n.approveSolicitation=function(){},n.insertSolicitation=function(){}}angular.module("afrmApp").controller("SolicitationController",n),n.$inject=["$scope"]}(),function(){"use strict";function n(n,o){var e="companies";this.create=function(t){return n.post(o.serverUrl+e,t)},this.update=function(t){return n.put(o.serverUrl+e,t)},this.get=function(){return n.get(o.serverUrl+e)}}n.$inject=["$http","$rootScope"],angular.module("afrmApp").service("companiesService",n)}(),function(){"use strict";function n(n,o){var e="credentials";this.login=function(t){var r="?email="+t.email+"&password="+t.password;return n.get(o.serverUrl+e+r)},this.create=function(t){return n.post(o.serverUrl+e,t)},this.logout=function(t){return n.get(o.serverUrl+e+"/"+t)}}n.$inject=["$http","$rootScope"],angular.module("afrmApp").service("credentialsService",n)}(),function(){"use strict";function n(n,o,e){n.save=function(n){return n},function(){n.internship=e.internship||{}}()}n.$inject=["$scope","$mdDialog","locals"],angular.module("afrmApp").controller("InternshipDialogController",n)}(),function(){"use strict";function n(n,o,e,t){n.save=function(t){var r;n.isLoadingCompany=!0,n.isEditing?(r=!1,e.update(t).success(function(e){n.isLoadingCompany=!1,o.hide(e,r)}).error(function(o){n.isLoadingCompany=!1,console.log(o)})):(r=!0,e.create(t).success(function(e){n.isLoadingCompany=!1,o.hide(e,r)}).error(function(o){n.isLoadingCompany=!1,console.log(o)}))},function(){t.company&&(n.isEditing=!0),n.company=t.company||{}}()}n.$inject=["$scope","$mdDialog","companiesService","locals"],angular.module("afrmApp").controller("ManageCompanyController",n)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC1tb2R1bGUuanMiLCJhcHAtY29udHJvbGxlci5qcyIsImFwcC1yb3V0ZXMuanMiLCJjb21wb25lbnRzL2NvbXBhbmllcy9jb21wYW5pZXMuY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2ludGVybnNoaXBzL2ludGVybnNoaXBzLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2luL3JlZ2lzdGVyLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL3NvbGljaXRhdGlvbi9zb2xpY2l0YXRpb24uY29udHJvbGxlci5qcyIsInNoYXJlZC9zZXJ2aWNlcy9jb21wYW5pZXMuc2VydmljZS5qcyIsInNoYXJlZC9zZXJ2aWNlcy9jcmVkZW50aWFscy5zZXJ2aWNlLmpzIiwic2hhcmVkL3RlbXBsYXRlcy9tb2RhbHMvaW50ZXJuc2hpcC5kaWFsb2cuY29udHJvbGxlci5qcyIsInNoYXJlZC90ZW1wbGF0ZXMvbW9kYWxzL21hbmFnZS1jb21wYW55LmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRtZFRoZW1pbmdQcm92aWRlciIsIiRtZERhdGVMb2NhbGVQcm92aWRlciIsImZvcm1hdERhdGUiLCJkYXRlIiwibW9tZW50IiwiZm9ybWF0IiwidGhlbWUiLCJwcmltYXJ5UGFsZXR0ZSIsImFjY2VudFBhbGV0dGUiLCJ3YXJuUGFsZXR0ZSIsImJhY2tncm91bmRQYWxldHRlIiwiTWFpbkNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwic2VydmVyVXJsIiwibWVudSIsInBhdGgiLCIkaW5qZWN0IiwiY29udHJvbGxlciIsIkFwcGxpY2F0aW9uQ29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJodG1sNU1vZGUiLCJDb21wYW5pZXNDb250cm9sbGVyIiwiJG1kRGlhbG9nIiwiY29tcGFuaWVzU2VydmljZSIsInNob3dEaWFsb2ciLCJjb21wYW55Iiwic2hvdyIsInBhcmVudCIsImVsZW1lbnQiLCJkb2N1bWVudCIsImJvZHkiLCJsb2NhbHMiLCJjbGlja091dHNpZGVUb0Nsb3NlIiwidGhlbiIsImlzTmV3Q29tcGFueSIsImNvbXBhbmllcyIsInB1c2giLCJmb3JFYWNoIiwiY29tcCIsIl9pZCIsImdldCIsInN1Y2Nlc3MiLCJlcnJvciIsInJlYXNvbiIsImNvbnNvbGUiLCJsb2ciLCJIb21lQ29udHJvbGxlciIsImFwcHJvdmVTb2xpY2l0YXRpb24iLCJpbnNlcnRTb2xpY2l0YXRpb24iLCJJbnRlcm5zaGlwc0NvbnRyb2xsZXIiLCJpbnRlcm5zaGlwIiwic3RhdHVzIiwiaW50ZXJuc2hpcHMiLCJzdHVkZW50IiwiY2xhc3MiLCJiZWdpbiIsImVuZCIsIkxvZ2luQ29udHJvbGxlciIsImNyZWRlbnRpYWxzU2VydmljZSIsImxvZ2luIiwiZW1haWwiLCJwYXNzIiwiY3JlZGVudGlhbCIsInBhc3N3b3JkIiwidG9rZW4iLCJ3aW5kb3ciLCJzZXNzaW9uU3RvcmFnZSIsInNldEl0ZW0iLCJSZWdpc3RlckNvbnRyb2xsZXIiLCIkbWRUb2FzdCIsIiR0aW1lb3V0IiwiY3JlYXRlQWNjb3VudCIsInVzciIsImNyZWF0ZSIsInJlc3VsdCIsInNpbXBsZSIsInRleHRDb250ZW50IiwicG9zaXRpb24iLCJoaWRlRGVsYXkiLCJTb2xpY2l0YXRpb25Db250cm9sbGVyIiwiQ29tcGFuaWVzU2VydmljZSIsIiRodHRwIiwidGhpcyIsInBvc3QiLCJ1cGRhdGUiLCJwdXQiLCJzZXJ2aWNlIiwiQ3JlZGVudGlhbHNTZXJ2aWNlIiwicXVlcnlzdHJpbmciLCJsb2dvdXQiLCJJbnRlcm5zaGlwRGlhbG9nQ29udHJvbGxlciIsInNhdmUiLCJNYW5hZ2VDb21wYW55Q29udHJvbGxlciIsImlzTG9hZGluZ0NvbXBhbnkiLCJpc0VkaXRpbmciLCJjb21wYW55RWRpdGVkIiwiaGlkZSIsIm5ld0NvbXBhbnkiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFHQUEsU0FBQUMsT0FBQSxXQUNBLGFBQ0EsWUFDQSxVQUNBLGlCQUNBLGtCQUdBQyxRQUFBLHFCQUFBLHdCQUFBLFNBQUFDLEVBQUFDLEdBR0FBLEVBQUFDLFdBQUEsU0FBQUMsR0FDQSxNQUFBQyxRQUFBRCxHQUFBRSxPQUFBLGVBSUFMLEVBQ0FNLE1BQUEsVUFDQUMsZUFBQSxRQUNBQyxjQUFBLFFBQ0FDLFlBQUEsT0FDQUMsa0JBQUEsY0N6QkEsV0FDQSxZQVdBLFNBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLEdBRUFELEVBQUFFLFVBQUEseUJBRUFILEVBQUFJLEtBQUEsU0FBQUMsR0FDQUgsRUFBQUcsS0FBQUEsSUFiQU4sRUFBQU8sU0FDQSxTQUFBLGFBQUEsYUFJQXJCLFFBQUFDLE9BQUEsV0FBQXFCLFdBQUEsaUJBQUFSLE1DVEEsV0FDQSxZQUlBLFNBQUFTLEdBQUFDLEVBQUFDLEdBQ0FELEVBRUFFLEtBQUEsS0FDQUMsWUFBQSxnQ0FDQUwsV0FBQSxtQkFHQUksS0FBQSxVQUNBQyxZQUFBLGtDQUNBTCxXQUFBLG9CQUdBSSxLQUFBLGdCQUNBQyxZQUFBLGdEQUNBTCxXQUFBLDJCQUdBSSxLQUFBLGFBQ0FDLFlBQUEsMENBQ0FMLFdBQUEsd0JBR0FJLEtBQUEsYUFDQUMsWUFBQSw4Q0FDQUwsV0FBQSwwQkFHQUksS0FBQSxhQUNBQyxZQUFBLHFDQUNBTCxXQUFBLHVCQUdBTSxXQUNBQyxXQUFBLE1BR0FKLEVBQUFLLFdBQUEsR0F2Q0E5QixRQUFBQyxPQUFBLFdBQUFDLFFBQUEsaUJBQUEsb0JBQUFxQixPQ0hBLFdBRUEsWUFNQSxTQUFBUSxHQUFBaEIsRUFBQWlCLEVBQUFDLEdBR0FsQixFQUFBbUIsV0FBQSxTQUFBQyxHQUVBSCxFQUFBSSxNQUNBZCxXQUFBLDBCQUNBSyxZQUFBLGtEQUNB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QUF5RixXQUNBNUQsR0FBQSxFQUNBWCxFQUFBNkQsT0FBQTNELEdBQ0FnQixRQUFBLFNBQUFzRCxHQUNBMUYsRUFBQXdGLGtCQUFBLEVBQ0F2RSxFQUFBMEUsS0FBQUQsRUFBQTdELEtBRUFRLE1BQUEsU0FBQUMsR0FDQXRDLEVBQUF3RixrQkFBQSxFQUNBakQsUUFBQUMsSUFBQUYsT0FNQVQsR0FBQSxFQUNBWCxFQUFBa0QsT0FBQWhELEdBQ0FnQixRQUFBLFNBQUF3RCxHQUNBNUYsRUFBQXdGLGtCQUFBLEVBQ0F2RSxFQUFBMEUsS0FBQUMsRUFBQS9ELEtBRUFRLE1BQUEsU0FBQUMsR0FDQXRDLEVBQUF3RixrQkFBQSxFQUNBakQsUUFBQUMsSUFBQUYsT0FLQSxXQUdBWixFQUFBTixVQUNBcEIsRUFBQXlGLFdBQUEsR0FFQXpGLEVBQUFvQixRQUFBTSxFQUFBTixlQUtBbUUsRUFBQWpGLFNBQUEsU0FBQSxZQUFBLG1CQUFBLFVBRUFyQixRQUFBQyxPQUFBLFdBQUFxQixXQUFBLDBCQUFBZ0YiLCJmaWxlIjoiYWZybS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIE1vZHVsZSBkZXBlbmRlbmNpZXMgaW5qZWN0aW9uXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnLCBbXG4gICAgICAgICduZ01hdGVyaWFsJyxcbiAgICAgICAgJ25nQW5pbWF0ZScsXG4gICAgICAgICduZ1JvdXRlJyxcbiAgICAgICAgJ2FuZ3VsYXIuZmlsdGVyJyxcbiAgICAgICAgJ21kLmRhdGEudGFibGUnXG4gICAgXSlcblxuICAgICAgICAuY29uZmlnKGZ1bmN0aW9uICgkbWRUaGVtaW5nUHJvdmlkZXIsICRtZERhdGVMb2NhbGVQcm92aWRlcikge1xuXG4gICAgICAgICAgICAvLyBEYXRlIGZvcm1hdCBjb25maWd1cmF0aW9uXG4gICAgICAgICAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKGRhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gVGhlbWUgY29uZmlndXJhdGlvblxuICAgICAgICAgICAgJG1kVGhlbWluZ1Byb3ZpZGVyXG4gICAgICAgICAgICAgICAgLnRoZW1lKCdmb3Jlc3QnKVxuICAgICAgICAgICAgICAgIC5wcmltYXJ5UGFsZXR0ZSgnYmx1ZScpXG4gICAgICAgICAgICAgICAgLmFjY2VudFBhbGV0dGUoJ3RlYWwnKVxuICAgICAgICAgICAgICAgIC53YXJuUGFsZXR0ZSgncmVkJylcbiAgICAgICAgICAgICAgICAuYmFja2dyb3VuZFBhbGV0dGUoJ2dyZXknKTtcbiAgICAgICAgfSk7XG5cbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIGluamVjdGluZyBkZXBlbmRlbmNpZXNcbiAgICBNYWluQ29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICAgICAnJHNjb3BlJywgJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJ1xuICAgIF07XG5cbiAgICAvLyByZWdpc3RlcmluZyBvbiBhbmd1bGFyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIE1haW5Db250cm9sbGVyKTtcblxuICAgIC8vIE1haW4gQ29udHJvbGxlclxuICAgIGZ1bmN0aW9uIE1haW5Db250cm9sbGVyKCRzY29wZSwgJHJvb3RTY29wZSwgJGxvY2F0aW9uKSB7XG5cbiAgICAgICAgJHJvb3RTY29wZS5zZXJ2ZXJVcmwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwLyc7XG5cbiAgICAgICAgJHNjb3BlLm1lbnUgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aChwYXRoKTtcbiAgICAgICAgfTtcblxuICAgIH1cbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCBBcHBsaWNhdGlvbkNvbmZpZ10pO1xuXG4gICAgZnVuY3Rpb24gQXBwbGljYXRpb25Db25maWcoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXG5cbiAgICAgICAgICAgIC53aGVuKCcvJywge1xuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVVybCcgOiAnYXBwL2NvbXBvbmVudHMvaG9tZS9ob21lLmh0bWwnLFxuICAgICAgICAgICAgICAgICdjb250cm9sbGVyJyAgOiAnSG9tZUNvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVVybCcgOiAnYXBwL2NvbXBvbmVudHMvbG9naW4vbG9naW4uaHRtbCcsXG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsZXInICA6ICdMb2dpbkNvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAud2hlbignL3NvbGljaXRhY2FvJywge1xuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVVybCcgOiAnYXBwL2NvbXBvbmVudHMvc29saWNpdGF0aW9uL3NvbGljaXRhdGlvbi5odG1sJyxcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcicgIDogJ1NvbGljaXRhdGlvbkNvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAud2hlbignL2VtcHJlc2FzJywge1xuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVVybCcgOiAnYXBwL2NvbXBvbmVudHMvY29tcGFuaWVzL2NvbXBhbmllcy5odG1sJyxcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcicgIDogJ0NvbXBhbmllc0NvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAud2hlbignL2VzdGFnaW9zJywge1xuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVVybCcgOiAnYXBwL2NvbXBvbmVudHMvaW50ZXJuc2hpcHMvaW50ZXJuc2hpcHMuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsZXInICA6ICdJbnRlcm5zaGlwc0NvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAud2hlbignL3JlZ2lzdHJvJywge1xuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVVybCcgOiAnYXBwL2NvbXBvbmVudHMvbG9naW4vcmVnaXN0ZXIuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsZXInICA6ICdSZWdpc3RlckNvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICAncmVkaXJlY3RUbyc6ICcvJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgIH1cbn0oKSk7IiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdDb21wYW5pZXNDb250cm9sbGVyJywgQ29tcGFuaWVzQ29udHJvbGxlcik7XG5cbiAgICBDb21wYW5pZXNDb250cm9sbGVyLiRpbmplY3QgPSBbICckc2NvcGUnLCAnJG1kRGlhbG9nJywgJ2NvbXBhbmllc1NlcnZpY2UnIF07XG5cbiAgICBmdW5jdGlvbiBDb21wYW5pZXNDb250cm9sbGVyKCRzY29wZSwgJG1kRGlhbG9nLCBjb21wYW5pZXNTZXJ2aWNlKSB7XG5cbiAgICAgICAgLy8gY3JpYSBvdSBlZGl0YSBjb21wYW55XG4gICAgICAgICRzY29wZS5zaG93RGlhbG9nID0gZnVuY3Rpb24oY29tcGFueSkge1xuXG4gICAgICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsZXInOiAnTWFuYWdlQ29tcGFueUNvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVVybCc6ICdhcHAvc2hhcmVkL3RlbXBsYXRlcy9tb2RhbHMvbWFuYWdlLWNvbXBhbnkuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3BhcmVudCc6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgICAgICAgICAnbG9jYWxzJzogeyAnY29tcGFueSc6IGNvbXBhbnkgfHwgbnVsbCB9LFxuICAgICAgICAgICAgICAgICdjbGlja091dHNpZGVUb0Nsb3NlJzp0cnVlXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKGNvbXBhbnksIGlzTmV3Q29tcGFueSkge1xuICAgICAgICAgICAgICAgIGlmIChjb21wYW55KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05ld0NvbXBhbnkpXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29tcGFuaWVzLnB1c2goY29tcGFueSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbXBhbmllcy5mb3JFYWNoKGZ1bmN0aW9uKGNvbXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tcC5faWQgPT09IGNvbXBhbnkuX2lkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wID0gIGNvbXBhbnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHt9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHtcblxuICAgICAgICAgICAgY29tcGFuaWVzU2VydmljZS5nZXQoKVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGNvbXBhbmllcykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29tcGFuaWVzID0gY29tcGFuaWVzO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWFzb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KCkpO1xuICAgIH1cbn0oKSk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ0hvbWVDb250cm9sbGVyJywgSG9tZUNvbnRyb2xsZXIpO1xuXG4gICAgSG9tZUNvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScgXTtcblxuICAgIGZ1bmN0aW9uIEhvbWVDb250cm9sbGVyKCRzY29wZSkge1xuXG4gICAgICAgICRzY29wZS5hcHByb3ZlU29saWNpdGF0aW9uID0gIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmluc2VydFNvbGljaXRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIH07XG4gICAgfVxufSgpKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignSW50ZXJuc2hpcHNDb250cm9sbGVyJywgSW50ZXJuc2hpcHNDb250cm9sbGVyKTtcblxuICAgIEludGVybnNoaXBzQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJyRtZERpYWxvZycgXTtcblxuICAgIGZ1bmN0aW9uIEludGVybnNoaXBzQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xuXG4gICAgICAgICRzY29wZS5zaG93RGlhbG9nID0gZnVuY3Rpb24oaW50ZXJuc2hpcCkge1xuXG4gICAgICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsZXInOiAnSW50ZXJuc2hpcERpYWxvZ0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVVybCc6ICdhcHAvc2hhcmVkL3RlbXBsYXRlcy9tb2RhbHMvaW50ZXJuc2hpcC1kaWFsb2cuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ3BhcmVudCc6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgICAgICAgICAnbG9jYWxzJzogeyAnaW50ZXJuc2hpcCc6IGludGVybnNoaXAgfHwgbnVsbCB9LFxuICAgICAgICAgICAgICAgICdjbGlja091dHNpZGVUb0Nsb3NlJzp0cnVlXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHt9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSBbJ0Fwcm92YWRvJywgJ0VtIGFuZGFtZW50bycsICdBZ3VhcmRhbmRvIGFwcm92YcOnw6NvJ107XG4gICAgICAgICAgICAkc2NvcGUuaW50ZXJuc2hpcHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAnY29tcGFueSc6ICdIUCcsXG4gICAgICAgICAgICAgICAgICAgICdzdHVkZW50JzogJ0ZlbGlwZScsXG4gICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdDaWVuY2lhIGRhIGNvbXAuJyxcbiAgICAgICAgICAgICAgICAgICAgJ2JlZ2luJzogJzEwLzA2LzIwMTYnLFxuICAgICAgICAgICAgICAgICAgICAnZW5kJzogJzEwLzEyLzIwMTYnLFxuICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJzogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAnY29tcGFueSc6ICdIUCcsXG4gICAgICAgICAgICAgICAgICAgICdzdHVkZW50JzogJ0ZlbGlwZScsXG4gICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdDaWVuY2lhIGRhIGNvbXAuJyxcbiAgICAgICAgICAgICAgICAgICAgJ2JlZ2luJzogJzEwLzA2LzIwMTYnLFxuICAgICAgICAgICAgICAgICAgICAnZW5kJzogJzEwLzEyLzIwMTYnLFxuICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJzogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAnY29tcGFueSc6ICdQbGluZycsXG4gICAgICAgICAgICAgICAgICAgICdzdHVkZW50JzogJ1Rlc3RlJyxcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ0VuZyBkYSBjb21wLicsXG4gICAgICAgICAgICAgICAgICAgICdiZWdpbic6ICcxMC8wNi8yMDE2JyxcbiAgICAgICAgICAgICAgICAgICAgJ2VuZCc6ICcxMC8xMi8yMDE2JyxcbiAgICAgICAgICAgICAgICAgICAgJ3N0YXR1cyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSgpKTtcbiAgICB9XG59KCkpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBMb2dpbkNvbnRyb2xsZXIpO1xuXG4gICAgTG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbICckc2NvcGUnLCAnY3JlZGVudGlhbHNTZXJ2aWNlJyBdO1xuXG4gICAgZnVuY3Rpb24gTG9naW5Db250cm9sbGVyKCRzY29wZSwgY3JlZGVudGlhbHNTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24oZW1haWwsIHBhc3MpIHtcbiAgICAgICAgICAgIHZhciBjcmVkZW50aWFsID0ge1xuICAgICAgICAgICAgICAgICdlbWFpbCc6IGVtYWlsLFxuICAgICAgICAgICAgICAgICdwYXNzd29yZCc6IHBhc3NcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNyZWRlbnRpYWxzU2VydmljZS5sb2dpbihjcmVkZW50aWFsKVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnVE9LRU4nLCB0b2tlbik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9naW5jb250cm9sbGVyJyk7XG4gICAgICAgIH0oKSk7XG4gICAgfVxufSgpKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgUmVnaXN0ZXJDb250cm9sbGVyKTtcblxuICAgIFJlZ2lzdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJ2NyZWRlbnRpYWxzU2VydmljZScsICckbG9jYXRpb24nLCAnJG1kVG9hc3QnLCAnJHRpbWVvdXQnIF07XG5cbiAgICBmdW5jdGlvbiBSZWdpc3RlckNvbnRyb2xsZXIoJHNjb3BlLCBjcmVkZW50aWFsc1NlcnZpY2UsICRsb2NhdGlvbiwgJG1kVG9hc3QsICR0aW1lb3V0KSB7XG5cbiAgICAgICAgJHNjb3BlLmNyZWF0ZUFjY291bnQgPSBmdW5jdGlvbih1c3IpIHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzU2VydmljZS5jcmVhdGUodXNyKVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnVXN1w6FyaW8gY3JpYWRvIGNvbSBzdWNlc3NvJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKCdib3R0b20nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uKCcvbG9naW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVhc29uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgIH1cbn0oKSk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ1NvbGljaXRhdGlvbkNvbnRyb2xsZXInLCBTb2xpY2l0YXRpb25Db250cm9sbGVyKTtcblxuICAgIFNvbGljaXRhdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScgXTtcblxuICAgIGZ1bmN0aW9uIFNvbGljaXRhdGlvbkNvbnRyb2xsZXIoJHNjb3BlKSB7XG5cbiAgICAgICAgJHNjb3BlLmFwcHJvdmVTb2xpY2l0YXRpb24gPSAgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaW5zZXJ0U29saWNpdGF0aW9uID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgfTtcbiAgICB9XG59KCkpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIENvbXBhbmllc1NlcnZpY2UoJGh0dHAsICRyb290U2NvcGUpIHtcblxuICAgICAgICB2YXIgbW9kdWxlID0gJ2NvbXBhbmllcyc7XG5cbiAgICAgICAgdGhpcy5jcmVhdGUgPSBmdW5jdGlvbiAoY29tcGFueSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUsIGNvbXBhbnkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGNvbXBhbnkpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wdXQoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUsIGNvbXBhbnkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgkcm9vdFNjb3BlLnNlcnZlclVybCArIG1vZHVsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgQ29tcGFuaWVzU2VydmljZS4kaW5qZWN0ID0gWyAnJGh0dHAnLCAnJHJvb3RTY29wZScgXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuc2VydmljZSgnY29tcGFuaWVzU2VydmljZScsIENvbXBhbmllc1NlcnZpY2UpO1xuXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBDcmVkZW50aWFsc1NlcnZpY2UoJGh0dHAsICRyb290U2NvcGUpIHtcblxuICAgICAgICB2YXIgbW9kdWxlID0gJ2NyZWRlbnRpYWxzJztcblxuICAgICAgICB0aGlzLmxvZ2luID0gZnVuY3Rpb24gKGNyZWRlbnRpYWwpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeXN0cmluZyA9ICc/ZW1haWw9JyArIGNyZWRlbnRpYWwuZW1haWwgKyAnJnBhc3N3b3JkPScgKyBjcmVkZW50aWFsLnBhc3N3b3JkO1xuXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCRyb290U2NvcGUuc2VydmVyVXJsICsgbW9kdWxlICsgcXVlcnlzdHJpbmcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY3JlYXRlID0gIGZ1bmN0aW9uKHVzcikge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUsIHVzcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5sb2dvdXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUgKyAnLycgKyB0b2tlbik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgQ3JlZGVudGlhbHNTZXJ2aWNlLiRpbmplY3QgPSBbICckaHR0cCcsICckcm9vdFNjb3BlJyBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5zZXJ2aWNlKCdjcmVkZW50aWFsc1NlcnZpY2UnLCBDcmVkZW50aWFsc1NlcnZpY2UpO1xuXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBJbnRlcm5zaGlwRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZywgbG9jYWxzKSB7XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbihpbnRlcm5zaGlwKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJuc2hpcDtcbiAgICAgICAgfTtcblxuICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgICRzY29wZS5pbnRlcm5zaGlwID0gbG9jYWxzLmludGVybnNoaXAgfHwge307XG4gICAgICAgIH0pKCk7XG4gICAgfVxuXG4gICAgSW50ZXJuc2hpcERpYWxvZ0NvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScsICckbWREaWFsb2cnLCAnbG9jYWxzJyBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdJbnRlcm5zaGlwRGlhbG9nQ29udHJvbGxlcicsIEludGVybnNoaXBEaWFsb2dDb250cm9sbGVyKTtcblxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gTWFuYWdlQ29tcGFueUNvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2csIGNvbXBhbmllc1NlcnZpY2UsIGxvY2Fscykge1xuXG4gICAgICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oY29tcGFueSkge1xuICAgICAgICAgICAgdmFyIGlzTmV3Q29tcGFueTtcblxuICAgICAgICAgICAgJHNjb3BlLmlzTG9hZGluZ0NvbXBhbnkgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBwdXRcbiAgICAgICAgICAgIGlmICgkc2NvcGUuaXNFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgaXNOZXdDb21wYW55ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29tcGFuaWVzU2VydmljZS51cGRhdGUoY29tcGFueSlcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGNvbXBhbnlFZGl0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmdDb21wYW55ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuaGlkZShjb21wYW55RWRpdGVkLCBpc05ld0NvbXBhbnkpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzTG9hZGluZ0NvbXBhbnkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBwb3N0XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpc05ld0NvbXBhbnkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbXBhbmllc1NlcnZpY2UuY3JlYXRlKGNvbXBhbnkpXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChuZXdDb21wYW55KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNMb2FkaW5nQ29tcGFueSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmhpZGUobmV3Q29tcGFueSwgaXNOZXdDb21wYW55KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmdDb21wYW55ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHtcblxuICAgICAgICAgICAgLy8gZWRpdGEgb3UgY3JpYSBlbXByZXNhXG4gICAgICAgICAgICBpZiAobG9jYWxzLmNvbXBhbnkpXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzRWRpdGluZyA9IHRydWU7XG5cbiAgICAgICAgICAgICRzY29wZS5jb21wYW55ID0gbG9jYWxzLmNvbXBhbnkgfHwge307XG5cbiAgICAgICAgfSkoKTtcbiAgICB9XG5cbiAgICBNYW5hZ2VDb21wYW55Q29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJyRtZERpYWxvZycsICdjb21wYW5pZXNTZXJ2aWNlJywgJ2xvY2FscycgXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignTWFuYWdlQ29tcGFueUNvbnRyb2xsZXInLCBNYW5hZ2VDb21wYW55Q29udHJvbGxlcik7XG5cbn0oKSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
