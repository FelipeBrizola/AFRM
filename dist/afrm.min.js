!function(){"use strict";angular.module("afrmApp",["ngMaterial","ngAnimate","ngRoute","angular.filter","md.data.table"]).config(["$mdThemingProvider","$mdDateLocaleProvider",function(n,e){e.formatDate=function(n){return moment(n).format("YYYY-MM-DD")},n.theme("forest").primaryPalette("blue").accentPalette("teal").warnPalette("red").backgroundPalette("grey")}])}(),function(){"use strict";function n(n,e,o){e.serverUrl="http://localhost:3000/",n.menu=function(n){o.path(n)},e.$on("$routeChangeSuccess",function(){"/empresas"===o.path()?n.currentMenuIndex=1:"/solicitacao"===o.path()?n.currentMenuIndex=0:"/estagios"===o.path()?n.currentMenuIndex=2:n.currentMenuIndex=-1,e.isLogin="/login"===o.path()})}n.$inject=["$scope","$rootScope","$location"],angular.module("afrmApp").controller("MainController",n)}(),function(){"use strict";function n(n,e){n.when("/",{templateUrl:"app/components/home/home.html",controller:"HomeController"}).when("/login",{templateUrl:"app/components/login/login.html",controller:"LoginController"}).when("/solicitacao",{templateUrl:"app/components/solicitation/solicitation.html",controller:"SolicitationController"}).when("/empresas",{templateUrl:"app/components/companies/companies.html",controller:"CompaniesController"}).when("/estagios",{templateUrl:"app/components/internships/internships.html",controller:"InternshipsController"}).when("/registro",{templateUrl:"app/components/login/register.html",controller:"RegisterController"}).otherwise({redirectTo:"/"}),e.html5Mode(!0)}angular.module("afrmApp").config(["$routeProvider","$locationProvider",n])}(),function(){"use strict";function n(n,e,o){n.showDialog=function(o){e.show({controller:"ManageCompanyController",templateUrl:"app/shared/templates/modals/manage-company.html",parent:angular.element(document.body),locals:{company:o||null},clickOutsideToClose:!0}).then(function(e,o){e&&(o?n.companies.push(e):n.companies.forEach(function(n){n._id===e._id&&(n=e)}))},function(){})},function(){o.get().success(function(e){n.companies=e}).error(function(n){console.log(n)})}()}angular.module("afrmApp").controller("CompaniesController",n),n.$inject=["$scope","$mdDialog","companiesService"]}(),function(){"use strict";function n(n){n.approveSolicitation=function(){},n.insertSolicitation=function(){}}angular.module("afrmApp").controller("HomeController",n),n.$inject=["$scope"]}(),function(){"use strict";function n(n,e,o){n.showDialog=function(n){e.show({controller:"InternshipDialogController",templateUrl:"app/shared/templates/modals/internship-dialog.html",parent:angular.element(document.body),locals:{internship:n||null},clickOutsideToClose:!0}).then(function(){console.log("ok")},function(){})},n.search=function(e){var t={credentialId:n.credential._id};e.name&&(t.name=e.name.trim()),e.status&&"Todos"!==e.status.trim()&&(t.status=e.status.trim()),o.get(t).success(function(e){n.internships=e}).error(function(n){console.log(n)})},function(){var e={};n.query={},n.status=["Todos","Aprovado","Em andamento","Reprovado","Cancelado","Aguardando aprovação"],n.credential=JSON.parse(window.localStorage.getItem("CREDENTIAL")),n.isStudent="student"===n.credential.role,e={credentialId:n.credential._id},o.get(e).success(function(e){n.internships=e}).error(function(n){console.log(n)})}()}angular.module("afrmApp").controller("InternshipsController",n),n.$inject=["$scope","$mdDialog","internshipsService"]}(),function(){"use strict";function n(n,e,o){n.login=function(n,t){var r={email:n,password:t};e.login(r).success(function(n){n&&(window.localStorage.setItem("CREDENTIAL",JSON.stringify(n)),o.path("/estagios"))}).error(function(n){console.log(n)})},function(){console.log("logincontroller")}()}angular.module("afrmApp").controller("LoginController",n),n.$inject=["$scope","credentialsService","$location"]}(),function(){"use strict";function n(n,e,o,t,r){n.createAccount=function(n){e.create(n).success(function(n){n&&(t.show(t.simple().textContent("Usuário criado com sucesso").position("bottom").hideDelay(3e3)),r(function(){o("/login")},3e3))}).error(function(n){console.log(n)})}}angular.module("afrmApp").controller("RegisterController",n),n.$inject=["$scope","credentialsService","$location","$mdToast","$timeout"]}(),function(){"use strict";function n(n){n.approveSolicitation=function(){},n.insertSolicitation=function(){}}angular.module("afrmApp").controller("SolicitationController",n),n.$inject=["$scope"]}(),function(){"use strict";function n(n,e){var o="companies";this.create=function(t){return n.post(e.serverUrl+o,t)},this.update=function(t){return n.put(e.serverUrl+o,t)},this.get=function(){return n.get(e.serverUrl+o)}}n.$inject=["$http","$rootScope"],angular.module("afrmApp").service("companiesService",n)}(),function(){"use strict";function n(n,e){var o="credentials";this.login=function(t){var r="?email="+t.email+"&password="+t.password;return n.get(e.serverUrl+o+"/"+r)},this.create=function(t){return n.post(e.serverUrl+o,t)},this.logout=function(t){return n.get(e.serverUrl+o+"/"+t)}}n.$inject=["$http","$rootScope"],angular.module("afrmApp").service("credentialsService",n)}(),function(){"use strict";function n(n,e){var o="internships";this.get=function(t){var r=e.serverUrl+o+"/?";return t.credentialId&&(r+="credentialId="+t.credentialId),t.status&&(r+="&status="+t.status),t.name&&(r+="&name="+t.name),n.get(r)}}n.$inject=["$http","$rootScope"],angular.module("afrmApp").service("internshipsService",n)}(),function(){"use strict";function n(n,e,o){n.save=function(n){return n},function(){n.internship=o.internship||{}}()}n.$inject=["$scope","$mdDialog","locals"],angular.module("afrmApp").controller("InternshipDialogController",n)}(),function(){"use strict";function n(n,e,o,t){n.save=function(t){var r;n.isLoadingCompany=!0,n.isEditing?(r=!1,o.update(t).success(function(o){n.isLoadingCompany=!1,e.hide(o,r)}).error(function(e){n.isLoadingCompany=!1,console.log(e)})):(r=!0,o.create(t).success(function(o){n.isLoadingCompany=!1,e.hide(o,r)}).error(function(e){n.isLoadingCompany=!1,console.log(e)}))},function(){t.company&&(n.isEditing=!0),n.company=t.company||{}}()}n.$inject=["$scope","$mdDialog","companiesService","locals"],angular.module("afrmApp").controller("ManageCompanyController",n)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC1tb2R1bGUuanMiLCJhcHAtY29udHJvbGxlci5qcyIsImFwcC1yb3V0ZXMuanMiLCJjb21wb25lbnRzL2NvbXBhbmllcy9jb21wYW5pZXMuY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2ludGVybnNoaXBzL2ludGVybnNoaXBzLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2luL3JlZ2lzdGVyLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL3NvbGljaXRhdGlvbi9zb2xpY2l0YXRpb24uY29udHJvbGxlci5qcyIsInNoYXJlZC9zZXJ2aWNlcy9jb21wYW5pZXMuc2VydmljZS5qcyIsInNoYXJlZC9zZXJ2aWNlcy9jcmVkZW50aWFscy5zZXJ2aWNlLmpzIiwic2hhcmVkL3NlcnZpY2VzL2ludGVybnNoaXBzLnNlcnZpY2UuanMiLCJzaGFyZWQvdGVtcGxhdGVzL21vZGFscy9pbnRlcm5zaGlwLmRpYWxvZy5jb250cm9sbGVyLmpzIiwic2hhcmVkL3RlbXBsYXRlcy9tb2RhbHMvbWFuYWdlLWNvbXBhbnkuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJG1kRGF0ZUxvY2FsZVByb3ZpZGVyIiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJtb21lbnQiLCJmb3JtYXQiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsIndhcm5QYWxldHRlIiwiYmFja2dyb3VuZFBhbGV0dGUiLCJNYWluQ29udHJvbGxlciIsIiRzY29wZSIsIiRyb290U2NvcGUiLCIkbG9jYXRpb24iLCJzZXJ2ZXJVcmwiLCJtZW51IiwicGF0aCIsIiRvbiIsImN1cnJlbnRNZW51SW5kZXgiLCJpc0xvZ2luIiwiJGluamVjdCIsImNvbnRyb2xsZXIiLCJBcHBsaWNhdGlvbkNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiaHRtbDVNb2RlIiwiQ29tcGFuaWVzQ29udHJvbGxlciIsIiRtZERpYWxvZyIsImNvbXBhbmllc1NlcnZpY2UiLCJzaG93RGlhbG9nIiwiY29tcGFueSIsInNob3ciLCJwYXJlbnQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJib2R5IiwibG9jYWxzIiwiY2xpY2tPdXRzaWRlVG9DbG9zZSIsInRoZW4iLCJpc05ld0NvbXBhbnkiLCJjb21wYW5pZXMiLCJwdXNoIiwiZm9yRWFjaCIsImNvbXAiLCJfaWQiLCJnZXQiLCJzdWNjZXNzIiwiZXJyb3IiLCJyZWFzb24iLCJjb25zb2xlIiwibG9nIiwiSG9tZUNvbnRyb2xsZXIiLCJhcHByb3ZlU29saWNpdGF0aW9uIiwiaW5zZXJ0U29saWNpdGF0aW9uIiwiSW50ZXJuc2hpcHNDb250cm9sbGVyIiwiaW50ZXJuc2hpcHNTZXJ2aWNlIiwiaW50ZXJuc2hpcCIsInNlYXJjaCIsInF1ZXJ5IiwicSIsImNyZWRlbnRpYWxJZCIsImNyZWRlbnRpYWwiLCJuYW1lIiwidHJpbSIsInN0YXR1cyIsImludGVybnNoaXBzIiwiSlNPTiIsInBhcnNlIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImlzU3R1ZGVudCIsInJvbGUiLCJMb2dpbkNvbnRyb2xsZXIiLCJjcmVkZW50aWFsc1NlcnZpY2UiLCJsb2dpbiIsImVtYWlsIiwicGFzcyIsInBhc3N3b3JkIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsIlJlZ2lzdGVyQ29udHJvbGxlciIsIiRtZFRvYXN0IiwiJHRpbWVvdXQiLCJjcmVhdGVBY2NvdW50IiwidXNyIiwiY3JlYXRlIiwicmVzdWx0Iiwic2ltcGxlIiwidGV4dENvbnRlbnQiLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsIlNvbGljaXRhdGlvbkNvbnRyb2xsZXIiLCJDb21wYW5pZXNTZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwicG9zdCIsInVwZGF0ZSIsInB1dCIsInNlcnZpY2UiLCJDcmVkZW50aWFsc1NlcnZpY2UiLCJxdWVyeXN0cmluZyIsImxvZ291dCIsInRva2VuIiwiSW50ZXJuc2hpcHNTZXJ2aWNlIiwidXJsIiwiSW50ZXJuc2hpcERpYWxvZ0NvbnRyb2xsZXIiLCJzYXZlIiwiTWFuYWdlQ29tcGFueUNvbnRyb2xsZXIiLCJpc0xvYWRpbmdDb21wYW55IiwiaXNFZGl0aW5nIiwiY29tcGFueUVkaXRlZCIsImhpZGUiLCJuZXdDb21wYW55Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBR0FBLFNBQUFDLE9BQUEsV0FDQSxhQUNBLFlBQ0EsVUFDQSxpQkFDQSxrQkFHQUMsUUFBQSxxQkFBQSx3QkFBQSxTQUFBQyxFQUFBQyxHQUdBQSxFQUFBQyxXQUFBLFNBQUFDLEdBQ0EsTUFBQUMsUUFBQUQsR0FBQUUsT0FBQSxlQUlBTCxFQUNBTSxNQUFBLFVBQ0FDLGVBQUEsUUFDQUMsY0FBQSxRQUNBQyxZQUFBLE9BQ0FDLGtCQUFBLGNDekJBLFdBQ0EsWUFXQSxTQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxVQUFBLHlCQUdBSCxFQUFBSSxLQUFBLFNBQUFDLEdBQ0FILEVBQUFHLEtBQUFBLElBR0FKLEVBQUFLLElBQUEsc0JBQUEsV0FFQSxjQUFBSixFQUFBRyxPQUNBTCxFQUFBTyxpQkFBQSxFQUVBLGlCQUFBTCxFQUFBRyxPQUNBTCxFQUFBTyxpQkFBQSxFQUVBLGNBQUFMLEVBQUFHLE9BQ0FMLEVBQUFPLGlCQUFBLEVBR0FQLEVBQUFPLG9CQUVBTixFQUFBTyxRQUFBLFdBQUFOLEVBQUFHLFNBL0JBTixFQUFBVSxTQUNBLFNBQUEsYUFBQSxhQUlBeEIsUUFBQUMsT0FBQSxXQUFBd0IsV0FBQSxpQkFBQVgsTUNUQSxXQUNBLFlBSUEsU0FBQVksR0FBQUMsRUFBQUMsR0FDQUQsRUFFQUUsS0FBQSxLQUNBQyxZQUFBLGdDQUNB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RUF4QixRQUFBQyxPQUFBLFdBQUF3QixXQUFBLDZCQUFBeUYsTUNqQkEsV0FFQSxZQUVBLFNBQUFFLEdBQUFyRyxFQUFBb0IsRUFBQUMsRUFBQVEsR0FFQTdCLEVBQUFvRyxLQUFBLFNBQUE3RSxHQUNBLEdBQUFTLEVBRUFoQyxHQUFBc0csa0JBQUEsRUFHQXRHLEVBQUF1RyxXQUNBdkUsR0FBQSxFQUNBWCxFQUFBcUUsT0FBQW5FLEdBQ0FnQixRQUFBLFNBQUFpRSxHQUNBeEcsRUFBQXNHLGtCQUFBLEVBQ0FsRixFQUFBcUYsS0FBQUQsRUFBQXhFLEtBRUFRLE1BQUEsU0FBQUMsR0FDQXpDLEVBQUFzRyxrQkFBQSxFQUNBNUQsUUFBQUMsSUFBQUYsT0FNQVQsR0FBQSxFQUNBWCxFQUFBMEQsT0FBQXhELEdBQ0FnQixRQUFBLFNBQUFtRSxHQUNBMUcsRUFBQXNHLGtCQUFBLEVBQ0FsRixFQUFBcUYsS0FBQUMsRUFBQTFFLEtBRUFRLE1BQUEsU0FBQUMsR0FDQXpDLEVBQUFzRyxrQkFBQSxFQUNBNUQsUUFBQUMsSUFBQUYsT0FLQSxXQUdBWixFQUFBTixVQUNBdkIsRUFBQXVHLFdBQUEsR0FFQXZHLEVBQUF1QixRQUFBTSxFQUFBTixlQUtBOEUsRUFBQTVGLFNBQUEsU0FBQSxZQUFBLG1CQUFBLFVBRUF4QixRQUFBQyxPQUFBLFdBQUF3QixXQUFBLDBCQUFBMkYiLCJmaWxlIjoiYWZybS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIE1vZHVsZSBkZXBlbmRlbmNpZXMgaW5qZWN0aW9uXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnLCBbXG4gICAgICAgICduZ01hdGVyaWFsJyxcbiAgICAgICAgJ25nQW5pbWF0ZScsXG4gICAgICAgICduZ1JvdXRlJyxcbiAgICAgICAgJ2FuZ3VsYXIuZmlsdGVyJyxcbiAgICAgICAgJ21kLmRhdGEudGFibGUnXG4gICAgXSlcblxuICAgICAgICAuY29uZmlnKGZ1bmN0aW9uICgkbWRUaGVtaW5nUHJvdmlkZXIsICRtZERhdGVMb2NhbGVQcm92aWRlcikge1xuXG4gICAgICAgICAgICAvLyBEYXRlIGZvcm1hdCBjb25maWd1cmF0aW9uXG4gICAgICAgICAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKGRhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gVGhlbWUgY29uZmlndXJhdGlvblxuICAgICAgICAgICAgJG1kVGhlbWluZ1Byb3ZpZGVyXG4gICAgICAgICAgICAgICAgLnRoZW1lKCdmb3Jlc3QnKVxuICAgICAgICAgICAgICAgIC5wcmltYXJ5UGFsZXR0ZSgnYmx1ZScpXG4gICAgICAgICAgICAgICAgLmFjY2VudFBhbGV0dGUoJ3RlYWwnKVxuICAgICAgICAgICAgICAgIC53YXJuUGFsZXR0ZSgncmVkJylcbiAgICAgICAgICAgICAgICAuYmFja2dyb3VuZFBhbGV0dGUoJ2dyZXknKTtcbiAgICAgICAgfSk7XG5cbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIGluamVjdGluZyBkZXBlbmRlbmNpZXNcbiAgICBNYWluQ29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICAgICAnJHNjb3BlJywgJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJ1xuICAgIF07XG5cbiAgICAvLyByZWdpc3RlcmluZyBvbiBhbmd1bGFyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIE1haW5Db250cm9sbGVyKTtcblxuICAgIC8vIE1haW4gQ29udHJvbGxlclxuICAgIGZ1bmN0aW9uIE1haW5Db250cm9sbGVyKCRzY29wZSwgJHJvb3RTY29wZSwgJGxvY2F0aW9uKSB7XG5cbiAgICAgICAgJHJvb3RTY29wZS5zZXJ2ZXJVcmwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwLyc7XG4gICAgICAgIC8vICRyb290U2NvcGUuc2VydmVyVXJsID0gJ2h0dHBzOi8vZGV2LXNpc3RlbWFzLmhlcm9rdWFwcC5jb20vJztcblxuICAgICAgICAkc2NvcGUubWVudSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpZiAoJGxvY2F0aW9uLnBhdGgoKSA9PT0gJy9lbXByZXNhcycpXG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRNZW51SW5kZXggPSAxO1xuXG4gICAgICAgICAgICBlbHNlIGlmICgkbG9jYXRpb24ucGF0aCgpID09PSAnL3NvbGljaXRhY2FvJylcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudE1lbnVJbmRleCA9IDA7XG5cbiAgICAgICAgICAgIGVsc2UgaWYgKCRsb2NhdGlvbi5wYXRoKCkgPT09ICcvZXN0YWdpb3MnKVxuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50TWVudUluZGV4ID0gMjtcblxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50TWVudUluZGV4ID0gLTE7XG5cbiAgICAgICAgICAgICRyb290U2NvcGUuaXNMb2dpbiA9ICRsb2NhdGlvbi5wYXRoKCkgPT09ICcvbG9naW4nID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgICAgIH0pO1xuXG4gICAgfVxufSgpKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb25maWcoWyckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsIEFwcGxpY2F0aW9uQ29uZmlnXSk7XG5cbiAgICBmdW5jdGlvbiBBcHBsaWNhdGlvbkNvbmZpZygkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcblxuICAgICAgICAgICAgLndoZW4oJy8nLCB7XG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyA6ICdhcHAvY29tcG9uZW50cy9ob21lL2hvbWUuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsZXInICA6ICdIb21lQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC53aGVuKCcvbG9naW4nLCB7XG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyA6ICdhcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5odG1sJyxcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcicgIDogJ0xvZ2luQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC53aGVuKCcvc29saWNpdGFjYW8nLCB7XG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyA6ICdhcHAvY29tcG9uZW50cy9zb2xpY2l0YXRpb24vc29saWNpdGF0aW9uLmh0bWwnLFxuICAgICAgICAgICAgICAgICdjb250cm9sbGVyJyAgOiAnU29saWNpdGF0aW9uQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC53aGVuKCcvZW1wcmVzYXMnLCB7XG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyA6ICdhcHAvY29tcG9uZW50cy9jb21wYW5pZXMvY29tcGFuaWVzLmh0bWwnLFxuICAgICAgICAgICAgICAgICdjb250cm9sbGVyJyAgOiAnQ29tcGFuaWVzQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC53aGVuKCcvZXN0YWdpb3MnLCB7XG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyA6ICdhcHAvY29tcG9uZW50cy9pbnRlcm5zaGlwcy9pbnRlcm5zaGlwcy5odG1sJyxcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcicgIDogJ0ludGVybnNoaXBzQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC53aGVuKCcvcmVnaXN0cm8nLCB7XG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyA6ICdhcHAvY29tcG9uZW50cy9sb2dpbi9yZWdpc3Rlci5odG1sJyxcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcicgIDogJ1JlZ2lzdGVyQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgICdyZWRpcmVjdFRvJzogJy8nXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAgfVxufSgpKTsiLCIoZnVuY3Rpb24oKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ0NvbXBhbmllc0NvbnRyb2xsZXInLCBDb21wYW5pZXNDb250cm9sbGVyKTtcblxuICAgIENvbXBhbmllc0NvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScsICckbWREaWFsb2cnLCAnY29tcGFuaWVzU2VydmljZScgXTtcblxuICAgIGZ1bmN0aW9uIENvbXBhbmllc0NvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2csIGNvbXBhbmllc1NlcnZpY2UpIHtcblxuICAgICAgICAvLyBjcmlhIG91IGVkaXRhIGNvbXBhbnlcbiAgICAgICAgJHNjb3BlLnNob3dEaWFsb2cgPSBmdW5jdGlvbihjb21wYW55KSB7XG5cbiAgICAgICAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcic6ICdNYW5hZ2VDb21wYW55Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJzogJ2FwcC9zaGFyZWQvdGVtcGxhdGVzL21vZGFscy9tYW5hZ2UtY29tcGFueS5odG1sJyxcbiAgICAgICAgICAgICAgICAncGFyZW50JzogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICAgICAgICAgICdsb2NhbHMnOiB7ICdjb21wYW55JzogY29tcGFueSB8fCBudWxsIH0sXG4gICAgICAgICAgICAgICAgJ2NsaWNrT3V0c2lkZVRvQ2xvc2UnOnRydWVcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oY29tcGFueSwgaXNOZXdDb21wYW55KSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmV3Q29tcGFueSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb21wYW5pZXMucHVzaChjb21wYW55KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29tcGFuaWVzLmZvckVhY2goZnVuY3Rpb24oY29tcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21wLl9pZCA9PT0gY29tcGFueS5faWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXAgPSAgY29tcGFueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge30pO1xuICAgICAgICB9O1xuXG4gICAgICAgIChmdW5jdGlvbiBpbml0KCkge1xuXG4gICAgICAgICAgICBjb21wYW5pZXNTZXJ2aWNlLmdldCgpXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oY29tcGFuaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jb21wYW5pZXMgPSBjb21wYW5pZXM7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0oKSk7XG4gICAgfVxufSgpKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLCBIb21lQ29udHJvbGxlcik7XG5cbiAgICBIb21lQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJyBdO1xuXG4gICAgZnVuY3Rpb24gSG9tZUNvbnRyb2xsZXIoJHNjb3BlKSB7XG5cbiAgICAgICAgJHNjb3BlLmFwcHJvdmVTb2xpY2l0YXRpb24gPSAgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaW5zZXJ0U29saWNpdGF0aW9uID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgfTtcbiAgICB9XG59KCkpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdJbnRlcm5zaGlwc0NvbnRyb2xsZXInLCBJbnRlcm5zaGlwc0NvbnRyb2xsZXIpO1xuXG4gICAgSW50ZXJuc2hpcHNDb250cm9sbGVyLiRpbmplY3QgPSBbICckc2NvcGUnLCAnJG1kRGlhbG9nJywgJ2ludGVybnNoaXBzU2VydmljZScgXTtcblxuICAgIGZ1bmN0aW9uIEludGVybnNoaXBzQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZywgaW50ZXJuc2hpcHNTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHNjb3BlLnNob3dEaWFsb2cgPSBmdW5jdGlvbihpbnRlcm5zaGlwKSB7XG5cbiAgICAgICAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcic6ICdJbnRlcm5zaGlwRGlhbG9nQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJzogJ2FwcC9zaGFyZWQvdGVtcGxhdGVzL21vZGFscy9pbnRlcm5zaGlwLWRpYWxvZy5odG1sJyxcbiAgICAgICAgICAgICAgICAncGFyZW50JzogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICAgICAgICAgICdsb2NhbHMnOiB7ICdpbnRlcm5zaGlwJzogaW50ZXJuc2hpcCB8fCBudWxsIH0sXG4gICAgICAgICAgICAgICAgJ2NsaWNrT3V0c2lkZVRvQ2xvc2UnOnRydWVcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29rJyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHt9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2VhcmNoID0gZnVuY3Rpb24ocXVlcnkpIHtcbiAgICAgICAgICAgIHZhciBxID0geydjcmVkZW50aWFsSWQnOiAkc2NvcGUuY3JlZGVudGlhbC5faWR9O1xuXG4gICAgICAgICAgICBpZiAocXVlcnkubmFtZSlcbiAgICAgICAgICAgICAgICBxLm5hbWUgPSBxdWVyeS5uYW1lLnRyaW0oKTtcblxuICAgICAgICAgICAgaWYgKHF1ZXJ5LnN0YXR1cyAmJiBxdWVyeS5zdGF0dXMudHJpbSgpICE9PSAnVG9kb3MnKVxuICAgICAgICAgICAgICAgIHEuc3RhdHVzID0gcXVlcnkuc3RhdHVzLnRyaW0oKTtcblxuICAgICAgICAgICAgaW50ZXJuc2hpcHNTZXJ2aWNlLmdldChxKVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGludGVybnNoaXBzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcm5zaGlwcyA9IGludGVybnNoaXBzO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWFzb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIChmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0ge307XG5cbiAgICAgICAgICAgICRzY29wZS5xdWVyeSA9IHt9O1xuXG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gWydUb2RvcycsICdBcHJvdmFkbycsICdFbSBhbmRhbWVudG8nLCAnUmVwcm92YWRvJywgJ0NhbmNlbGFkbycsICdBZ3VhcmRhbmRvIGFwcm92YcOnw6NvJ107XG5cbiAgICAgICAgICAgICRzY29wZS5jcmVkZW50aWFsID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0NSRURFTlRJQUwnKSk7XG5cbiAgICAgICAgICAgICRzY29wZS5pc1N0dWRlbnQgPSAkc2NvcGUuY3JlZGVudGlhbC5yb2xlID09PSAnc3R1ZGVudCcgPyB0cnVlIDogZmFsc2U7XG5cbiAgICAgICAgICAgIHF1ZXJ5ID0geydjcmVkZW50aWFsSWQnOiAkc2NvcGUuY3JlZGVudGlhbC5faWR9O1xuXG4gICAgICAgICAgICBpbnRlcm5zaGlwc1NlcnZpY2UuZ2V0KHF1ZXJ5KVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGludGVybnNoaXBzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcm5zaGlwcyA9IGludGVybnNoaXBzO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWFzb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0oKSk7XG4gICAgfVxufSgpKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgTG9naW5Db250cm9sbGVyKTtcblxuICAgIExvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJ2NyZWRlbnRpYWxzU2VydmljZScsICckbG9jYXRpb24nIF07XG5cbiAgICBmdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIoJHNjb3BlLCBjcmVkZW50aWFsc1NlcnZpY2UsICRsb2NhdGlvbikge1xuXG4gICAgICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKGVtYWlsLCBwYXNzKSB7XG4gICAgICAgICAgICB2YXIgY3JlZGVudGlhbCA9IHtcbiAgICAgICAgICAgICAgICAnZW1haWwnOiBlbWFpbCxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjcmVkZW50aWFsc1NlcnZpY2UubG9naW4oY3JlZGVudGlhbClcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoY3JlZGVudGlhbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3JlZGVudGlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdDUkVERU5USUFMJywgSlNPTi5zdHJpbmdpZnkoY3JlZGVudGlhbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9lc3RhZ2lvcycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9naW5jb250cm9sbGVyJyk7XG4gICAgICAgIH0oKSk7XG4gICAgfVxufSgpKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgUmVnaXN0ZXJDb250cm9sbGVyKTtcblxuICAgIFJlZ2lzdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJ2NyZWRlbnRpYWxzU2VydmljZScsICckbG9jYXRpb24nLCAnJG1kVG9hc3QnLCAnJHRpbWVvdXQnIF07XG5cbiAgICBmdW5jdGlvbiBSZWdpc3RlckNvbnRyb2xsZXIoJHNjb3BlLCBjcmVkZW50aWFsc1NlcnZpY2UsICRsb2NhdGlvbiwgJG1kVG9hc3QsICR0aW1lb3V0KSB7XG5cbiAgICAgICAgJHNjb3BlLmNyZWF0ZUFjY291bnQgPSBmdW5jdGlvbih1c3IpIHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzU2VydmljZS5jcmVhdGUodXNyKVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnVXN1w6FyaW8gY3JpYWRvIGNvbSBzdWNlc3NvJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKCdib3R0b20nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uKCcvbG9naW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVhc29uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgIH1cbn0oKSk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ1NvbGljaXRhdGlvbkNvbnRyb2xsZXInLCBTb2xpY2l0YXRpb25Db250cm9sbGVyKTtcblxuICAgIFNvbGljaXRhdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScgXTtcblxuICAgIGZ1bmN0aW9uIFNvbGljaXRhdGlvbkNvbnRyb2xsZXIoJHNjb3BlKSB7XG5cbiAgICAgICAgJHNjb3BlLmFwcHJvdmVTb2xpY2l0YXRpb24gPSAgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaW5zZXJ0U29saWNpdGF0aW9uID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgfTtcblxuICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgfSgpKTtcblxuICAgIH1cbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gQ29tcGFuaWVzU2VydmljZSgkaHR0cCwgJHJvb3RTY29wZSkge1xuXG4gICAgICAgIHZhciBtb2R1bGUgPSAnY29tcGFuaWVzJztcblxuICAgICAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uIChjb21wYW55KSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgkcm9vdFNjb3BlLnNlcnZlclVybCArIG1vZHVsZSwgY29tcGFueSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoY29tcGFueSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgkcm9vdFNjb3BlLnNlcnZlclVybCArIG1vZHVsZSwgY29tcGFueSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCRyb290U2NvcGUuc2VydmVyVXJsICsgbW9kdWxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBDb21wYW5pZXNTZXJ2aWNlLiRpbmplY3QgPSBbICckaHR0cCcsICckcm9vdFNjb3BlJyBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5zZXJ2aWNlKCdjb21wYW5pZXNTZXJ2aWNlJywgQ29tcGFuaWVzU2VydmljZSk7XG5cbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIENyZWRlbnRpYWxzU2VydmljZSgkaHR0cCwgJHJvb3RTY29wZSkge1xuXG4gICAgICAgIHZhciBtb2R1bGUgPSAnY3JlZGVudGlhbHMnO1xuXG4gICAgICAgIHRoaXMubG9naW4gPSBmdW5jdGlvbiAoY3JlZGVudGlhbCkge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5c3RyaW5nID0gJz9lbWFpbD0nICsgY3JlZGVudGlhbC5lbWFpbCArICcmcGFzc3dvcmQ9JyArIGNyZWRlbnRpYWwucGFzc3dvcmQ7XG5cbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUgKyAnLycgKyBxdWVyeXN0cmluZyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jcmVhdGUgPSAgZnVuY3Rpb24odXNyKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgkcm9vdFNjb3BlLnNlcnZlclVybCArIG1vZHVsZSwgdXNyKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgkcm9vdFNjb3BlLnNlcnZlclVybCArIG1vZHVsZSArICcvJyArIHRva2VuKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBDcmVkZW50aWFsc1NlcnZpY2UuJGluamVjdCA9IFsgJyRodHRwJywgJyRyb290U2NvcGUnIF07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLnNlcnZpY2UoJ2NyZWRlbnRpYWxzU2VydmljZScsIENyZWRlbnRpYWxzU2VydmljZSk7XG5cbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIEludGVybnNoaXBzU2VydmljZSgkaHR0cCwgJHJvb3RTY29wZSkge1xuXG4gICAgICAgIHZhciBtb2R1bGUgPSAnaW50ZXJuc2hpcHMnO1xuXG4gICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG4gICAgICAgICAgICB2YXIgdXJsID0gJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUgKyAnLz8nO1xuXG4gICAgICAgICAgICBpZiAocXVlcnkuY3JlZGVudGlhbElkKVxuICAgICAgICAgICAgICAgIHVybCArPSAnY3JlZGVudGlhbElkPScgKyBxdWVyeS5jcmVkZW50aWFsSWQ7XG5cbiAgICAgICAgICAgIGlmIChxdWVyeS5zdGF0dXMpXG4gICAgICAgICAgICAgICAgdXJsICs9ICcmc3RhdHVzPScgKyBxdWVyeS5zdGF0dXM7XG5cbiAgICAgICAgICAgIGlmIChxdWVyeS5uYW1lKVxuICAgICAgICAgICAgICAgIHVybCArPSAnJm5hbWU9JyArIHF1ZXJ5Lm5hbWU7XG5cbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBJbnRlcm5zaGlwc1NlcnZpY2UuJGluamVjdCA9IFsgJyRodHRwJywgJyRyb290U2NvcGUnIF07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLnNlcnZpY2UoJ2ludGVybnNoaXBzU2VydmljZScsIEludGVybnNoaXBzU2VydmljZSk7XG5cbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIEludGVybnNoaXBEaWFsb2dDb250cm9sbGVyKCRzY29wZSwgJG1kRGlhbG9nLCBsb2NhbHMpIHtcblxuICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKGludGVybnNoaXApIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRlcm5zaGlwO1xuICAgICAgICB9O1xuXG4gICAgICAgIChmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICAgICAgJHNjb3BlLmludGVybnNoaXAgPSBsb2NhbHMuaW50ZXJuc2hpcCB8fCB7fTtcbiAgICAgICAgfSkoKTtcbiAgICB9XG5cbiAgICBJbnRlcm5zaGlwRGlhbG9nQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJyRtZERpYWxvZycsICdsb2NhbHMnIF07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ0ludGVybnNoaXBEaWFsb2dDb250cm9sbGVyJywgSW50ZXJuc2hpcERpYWxvZ0NvbnRyb2xsZXIpO1xuXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBNYW5hZ2VDb21wYW55Q29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZywgY29tcGFuaWVzU2VydmljZSwgbG9jYWxzKSB7XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbihjb21wYW55KSB7XG4gICAgICAgICAgICB2YXIgaXNOZXdDb21wYW55O1xuXG4gICAgICAgICAgICAkc2NvcGUuaXNMb2FkaW5nQ29tcGFueSA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIHB1dFxuICAgICAgICAgICAgaWYgKCRzY29wZS5pc0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICBpc05ld0NvbXBhbnkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBjb21wYW5pZXNTZXJ2aWNlLnVwZGF0ZShjb21wYW55KVxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoY29tcGFueUVkaXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzTG9hZGluZ0NvbXBhbnkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKGNvbXBhbnlFZGl0ZWQsIGlzTmV3Q29tcGFueSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNMb2FkaW5nQ29tcGFueSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVhc29uKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBvc3RcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlzTmV3Q29tcGFueSA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29tcGFuaWVzU2VydmljZS5jcmVhdGUoY29tcGFueSlcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKG5ld0NvbXBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmdDb21wYW55ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuaGlkZShuZXdDb21wYW55LCBpc05ld0NvbXBhbnkpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzTG9hZGluZ0NvbXBhbnkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIChmdW5jdGlvbiBpbml0KCkge1xuXG4gICAgICAgICAgICAvLyBlZGl0YSBvdSBjcmlhIGVtcHJlc2FcbiAgICAgICAgICAgIGlmIChsb2NhbHMuY29tcGFueSlcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNFZGl0aW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgJHNjb3BlLmNvbXBhbnkgPSBsb2NhbHMuY29tcGFueSB8fCB7fTtcblxuICAgICAgICB9KSgpO1xuICAgIH1cblxuICAgIE1hbmFnZUNvbXBhbnlDb250cm9sbGVyLiRpbmplY3QgPSBbICckc2NvcGUnLCAnJG1kRGlhbG9nJywgJ2NvbXBhbmllc1NlcnZpY2UnLCAnbG9jYWxzJyBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdNYW5hZ2VDb21wYW55Q29udHJvbGxlcicsIE1hbmFnZUNvbXBhbnlDb250cm9sbGVyKTtcblxufSgpKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
