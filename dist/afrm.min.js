!function(){"use strict";angular.module("afrmApp",["ngMaterial","ngAnimate","ngRoute","angular.filter","md.data.table"]).config(["$mdThemingProvider","$mdDateLocaleProvider",function(e,n){n.formatDate=function(e){return moment(e).format("YYYY-MM-DD")},e.theme("forest").primaryPalette("blue").accentPalette("teal").warnPalette("red").backgroundPalette("grey")}])}(),function(){"use strict";function e(e,n,t){n.serverUrl="https://dev-sistemas-server.herokuapp.com/",e.menu=function(e){t.path(e)},e.logout=function(){window.localStorage.removeItem("CREDENTIAL"),t.path("/login")},n.$on("$routeChangeSuccess",function(){"/empresas"===t.path()?e.currentMenuIndex=1:"/solicitacao"===t.path()?e.currentMenuIndex=0:"/estagios"===t.path()?e.currentMenuIndex=2:e.currentMenuIndex=-1,n.isLogin="/login"===t.path()})}e.$inject=["$scope","$rootScope","$location"],angular.module("afrmApp").controller("MainController",e)}(),function(){"use strict";function e(e,n){e.when("/login",{templateUrl:"app/components/login/login.html",controller:"LoginController"}).when("/solicitacao",{templateUrl:"app/components/solicitation/solicitation.html",controller:"SolicitationController"}).when("/empresas",{templateUrl:"app/components/companies/companies.html",controller:"CompaniesController"}).when("/estagios",{templateUrl:"app/components/internships/internships.html",controller:"InternshipsController"}).when("/registro",{templateUrl:"app/components/login/register.html",controller:"RegisterController"}).otherwise({redirectTo:"/login"}),n.html5Mode(!0)}angular.module("afrmApp").config(["$routeProvider","$locationProvider",e])}(),function(){"use strict";function e(e,n,t){function o(n){t.get(n).success(function(n){e.companies=n}).error(function(e){console.log(e)})}e.showDialog=function(e){"Aguardando aprovação"===e.status&&n.show({controller:"ManageCompanyController",templateUrl:"app/shared/templates/modals/company-dialog.html",parent:angular.element(document.body),locals:{company:e},clickOutsideToClose:!0})},e.search=function(e){o(e)},function(){e.companySelected=[],o()}()}angular.module("afrmApp").controller("CompaniesController",e),e.$inject=["$scope","$mdDialog","companiesService"]}(),function(){"use strict";function e(e){e.approveSolicitation=function(){},e.insertSolicitation=function(){}}angular.module("afrmApp").controller("HomeController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,n,t){e.showDialog=function(t,o){"Aguardando aprovação"!==t.status||"coordinator"!==e.credential.role&&"student"!==e.credential.role||n.show({controller:"InternshipDialogController",templateUrl:"app/shared/templates/modals/internship-dialog.html",parent:angular.element(document.body),locals:{internship:t||{},credential:o},clickOutsideToClose:!0})},e.search=function(n){var o={credentialId:e.credential._id};n.name&&(o.name=n.name.trim()),n.status&&"Todos"!==n.status.trim()&&(o.status=n.status.trim()),t.get(o).success(function(n){e.internships=n}).error(function(e){console.log(e)})},function(){var n={};e.query={},e.status=["Todos","Em andamento","Reprovado","Cancelado","Aguardando aprovação","Finalizado"],e.credential=JSON.parse(window.localStorage.getItem("CREDENTIAL"))||{},e.isStudent="student"===e.credential.role,n={credentialId:e.credential._id},t.get(n).success(function(n){e.internships=n}).error(function(e){console.log(e)})}()}angular.module("afrmApp").controller("InternshipsController",e),e.$inject=["$scope","$mdDialog","internshipsService"]}(),function(){"use strict";function e(e,n,t,o){e.login=function(r,i){var a={email:r,password:i};n.login(a).success(function(n){n?(window.localStorage.setItem("CREDENTIAL",JSON.stringify(n)),o.credential=n,t.path("/estagios")):e.isWrongLogin=!0}).error(function(e){console.log(e)})}}angular.module("afrmApp").controller("LoginController",e),e.$inject=["$scope","credentialsService","$location","$rootScope"]}(),function(){"use strict";function e(e,n,t,o,r){e.createAccount=function(e){n.create(e).success(function(e){e&&(o.show(o.simple().textContent("Usuário criado com sucesso").position("bottom").hideDelay(3e3)),r(function(){t("/login")},3e3))}).error(function(e){console.log(e)})}}angular.module("afrmApp").controller("RegisterController",e),e.$inject=["$scope","credentialsService","$location","$mdToast","$timeout"]}(),function(){"use strict";function e(e){e.approveSolicitation=function(){},e.insertSolicitation=function(){}}angular.module("afrmApp").controller("SolicitationController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,n){var t="companies";this.create=function(o){return e.post(n.serverUrl+t,o)},this.update=function(o){return e.put(n.serverUrl+t,o)},this.get=function(o){var r=n.serverUrl+t;return o&&(r=r+"/"+o),e.get(r)}}e.$inject=["$http","$rootScope"],angular.module("afrmApp").service("companiesService",e)}(),function(){"use strict";function e(e,n){var t="credentials";this.login=function(o){var r="?email="+o.email+"&password="+o.password;return e.get(n.serverUrl+t+"/"+r)},this.create=function(o){return e.post(n.serverUrl+t,o)},this.logout=function(o){return e.get(n.serverUrl+t+"/"+o)}}e.$inject=["$http","$rootScope"],angular.module("afrmApp").service("credentialsService",e)}(),function(){"use strict";function e(e,n){var t="internships";this.get=function(o){var r=n.serverUrl+t+"/?";return o.credentialId&&(r+="credentialId="+o.credentialId),o.status&&(r+="&status="+o.status),o.name&&(r+="&name="+o.name),e.get(r)},this.update=function(o){return e.put(n.serverUrl+t,o)}}e.$inject=["$http","$rootScope"],angular.module("afrmApp").service("internshipsService",e)}(),function(){"use strict";function e(e,n,t,o){e.save=function(o,r){e.isLoadingCompany=!0,r===!0?o.status="Aprovado":o.status="Reprovado",t.update(o).success(function(){e.isLoadingCompany=!1,n.hide(o)}).error(function(n){e.isLoadingCompany=!1,console.log(n)})},e.closeDialog=function(){n.cancel()},function(){e.company=o.company||{}}()}e.$inject=["$scope","$mdDialog","companiesService","locals"],angular.module("afrmApp").controller("ManageCompanyController",e)}(),function(){"use strict";function e(e,n,t,o){function r(){e.isSaving=!0,t.update(e.internship).success(function(){e.isSaving=!1,n.hide(e.internship)}).error(function(t){console.log(t),e.isSaving=!1,n.hide()})}e.save=function(n){n&&"coordinator"===e.credential.role?(e.internship.status="Em andamento",e.internship.begin=moment().format("DD/MM/YYYY"),e.internship.end=moment(moment()).add(6,"months").format("DD/MM/YYYY")):n||"coordinator"!==e.credential.role?n||"student"!==e.credential.role||(e.internship.status="Cancelado"):e.internship.status="Reprovado",r()},e.closeDialog=function(){n.cancel()},function(){e.internship=o.internship||{},e.credential=o.credential||{}}()}e.$inject=["$scope","$mdDialog","internshipsService","locals"],angular.module("afrmApp").controller("InternshipDialogController",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC1tb2R1bGUuanMiLCJhcHAtY29udHJvbGxlci5qcyIsImFwcC1yb3V0ZXMuanMiLCJjb21wb25lbnRzL2NvbXBhbmllcy9jb21wYW5pZXMuY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2ludGVybnNoaXBzL2ludGVybnNoaXBzLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2luL3JlZ2lzdGVyLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL3NvbGljaXRhdGlvbi9zb2xpY2l0YXRpb24uY29udHJvbGxlci5qcyIsInNoYXJlZC9zZXJ2aWNlcy9jb21wYW5pZXMuc2VydmljZS5qcyIsInNoYXJlZC9zZXJ2aWNlcy9jcmVkZW50aWFscy5zZXJ2aWNlLmpzIiwic2hhcmVkL3NlcnZpY2VzL2ludGVybnNoaXBzLnNlcnZpY2UuanMiLCJzaGFyZWQvdGVtcGxhdGVzL21vZGFscy9jb21wYW55LmRpYWxvZy5jb250cm9sbGVyLmpzIiwic2hhcmVkL3RlbXBsYXRlcy9tb2RhbHMvaW50ZXJuc2hpcC5kaWFsb2cuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJG1kRGF0ZUxvY2FsZVByb3ZpZGVyIiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJtb21lbnQiLCJmb3JtYXQiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsIndhcm5QYWxldHRlIiwiYmFja2dyb3VuZFBhbGV0dGUiLCJNYWluQ29udHJvbGxlciIsIiRzY29wZSIsIiRyb290U2NvcGUiLCIkbG9jYXRpb24iLCJzZXJ2ZXJVcmwiLCJtZW51IiwicGF0aCIsImxvZ291dCIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsInJlbW92ZUl0ZW0iLCIkb24iLCJjdXJyZW50TWVudUluZGV4IiwiaXNMb2dpbiIsIiRpbmplY3QiLCJjb250cm9sbGVyIiwiQXBwbGljYXRpb25Db25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImh0bWw1TW9kZSIsIkNvbXBhbmllc0NvbnRyb2xsZXIiLCIkbWREaWFsb2ciLCJjb21wYW5pZXNTZXJ2aWNlIiwiZ2V0Q29tcGFuaWVzIiwibmFtZSIsImdldCIsInN1Y2Nlc3MiLCJjb21wYW5pZXMiLCJlcnJvciIsInJlYXNvbiIsImNvbnNvbGUiLCJsb2ciLCJzaG93RGlhbG9nIiwiY29tcGFueSIsInN0YXR1cyIsInNob3ciLCJwYXJlbnQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJib2R5IiwibG9jYWxzIiwiY2xpY2tPdXRzaWRlVG9DbG9zZSIsInNlYXJjaCIsImNvbXBhbnlTZWxlY3RlZCIsIkhvbWVDb250cm9sbGVyIiwiYXBwcm92ZVNvbGljaXRhdGlvbiIsImluc2VydFNvbGljaXRhdGlvbiIsIkludGVybnNoaXBzQ29udHJvbGxlciIsImludGVybnNoaXBzU2VydmljZSIsImludGVybnNoaXAiLCJjcmVkZW50aWFsIiwicm9sZSIsInF1ZXJ5IiwicSIsImNyZWRlbnRpYWxJZCIsIl9pZCIsInRyaW0iLCJpbnRlcm5zaGlwcyIsIkpTT04iLCJwYXJzZSIsImdldEl0ZW0iLCJpc1N0dWRlbnQiLCJMb2dpbkNvbnRyb2xsZXIiLCJjcmVkZW50aWFsc1NlcnZpY2UiLCJsb2dpbiIsImVtYWlsIiwicGFzcyIsInBhc3N3b3JkIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImlzV3JvbmdMb2dpbiIsIlJlZ2lzdGVyQ29udHJvbGxlciIsIiRtZFRvYXN0IiwiJHRpbWVvdXQiLCJjcmVhdGVBY2NvdW50IiwidXNyIiwiY3JlYXRlIiwicmVzdWx0Iiwic2ltcGxlIiwidGV4dENvbnRlbnQiLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsIlNvbGljaXRhdGlvbkNvbnRyb2xsZXIiLCJDb21wYW5pZXNTZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwicG9zdCIsInVwZGF0ZSIsInB1dCIsInVybCIsInNlcnZpY2UiLCJDcmVkZW50aWFsc1NlcnZpY2UiLCJxdWVyeXN0cmluZyIsInRva2VuIiwiSW50ZXJuc2hpcHNTZXJ2aWNlIiwiTWFuYWdlQ29tcGFueUNvbnRyb2xsZXIiLCJzYXZlIiwiaXNMb2FkaW5nQ29tcGFueSIsImhpZGUiLCJjbG9zZURpYWxvZyIsImNhbmNlbCIsIkludGVybnNoaXBEaWFsb2dDb250cm9sbGVyIiwidXBkYXRlSW50ZXJuc2hpcCIsImlzU2F2aW5nIiwiaXNBcHByb3ZlIiwiYmVnaW4iLCJlbmQiLCJhZGQiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFHQUEsU0FBQUMsT0FBQSxXQUNBLGFBQ0EsWUFDQSxVQUNBLGlCQUNBLGtCQUdBQyxRQUFBLHFCQUFBLHdCQUFBLFNBQUFDLEVBQUFDLEdBR0FBLEVBQUFDLFdBQUEsU0FBQUMsR0FDQSxNQUFBQyxRQUFBRCxHQUFBRSxPQUFBLGVBSUFMLEVBQ0FNLE1BQUEsVUFDQUMsZUFBQSxRQUNBQyxjQUFBLFFBQ0FDLFlBQUEsT0FDQUMsa0JBQUEsY0N6QkEsV0FDQSxZQVdBLFNBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLEdBR0FELEVBQUFFLFVBQUEsNkNBRUFILEVBQUFJLEtBQUEsU0FBQUMsR0FDQUgsRUFBQUcsS0FBQUEsSUFHQUwsRUFBQU0sT0FBQSxXQUNBQyxPQUFBQyxhQUFBQyxXQUFBLGNBQ0FQLEVBQUFHLEtBQUEsV0FHQUosRUFBQVMsSUFBQSxzQkFBQSxXQUVBLGNBQUFSLEVBQUFHLE9BQ0FMLEVBQUFXLGlCQUFBLEVBRUEsaUJBQUFULEVBQUFHLE9BQ0FMLEVBQUFXLGlCQUFBLEVBRUEsY0FBQVQsRUFBQUcsT0FDQUwsRUFBQVcsaUJBQUEsRUFHQVgsRUFBQVcsb0JBRUFWLEVBQUFXLFFBQUEsV0FBQVYsRUFBQUcsU0FwQ0FOLEVBQUFjLFNB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T0FBQSxjQUNBTyxFQUFBb0QsV0FBQXlELElBQUFySCxPQUFBQSxVQUFBc0gsSUFBQSxFQUFBLFVBQUFySCxPQUFBLGVBRUFrSCxHQUFBLGdCQUFBM0csRUFBQXFELFdBQUFDLEtBR0FxRCxHQUFBLFlBQUEzRyxFQUFBcUQsV0FBQUMsT0FDQXRELEVBQUFvRCxXQUFBZixPQUFBLGFBSEFyQyxFQUFBb0QsV0FBQWYsT0FBQSxZQUtBb0UsS0FHQXpHLEVBQUFzRyxZQUFBLFdBQ0E5RSxFQUFBK0UsVUFHQSxXQUNBdkcsRUFBQW9ELFdBQUFULEVBQUFTLGVBQ0FwRCxFQUFBcUQsV0FBQVYsRUFBQVUsa0JBSUFtRCxFQUFBM0YsU0FBQSxTQUFBLFlBQUEscUJBQUEsVUFFQTVCLFFBQUFDLE9BQUEsV0FBQTRCLFdBQUEsNkJBQUEwRiIsImZpbGUiOiJhZnJtLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gTW9kdWxlIGRlcGVuZGVuY2llcyBpbmplY3Rpb25cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcsIFtcbiAgICAgICAgJ25nTWF0ZXJpYWwnLFxuICAgICAgICAnbmdBbmltYXRlJyxcbiAgICAgICAgJ25nUm91dGUnLFxuICAgICAgICAnYW5ndWxhci5maWx0ZXInLFxuICAgICAgICAnbWQuZGF0YS50YWJsZSdcbiAgICBdKVxuXG4gICAgICAgIC5jb25maWcoZnVuY3Rpb24gKCRtZFRoZW1pbmdQcm92aWRlciwgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyKSB7XG5cbiAgICAgICAgICAgIC8vIERhdGUgZm9ybWF0IGNvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgICRtZERhdGVMb2NhbGVQcm92aWRlci5mb3JtYXREYXRlID0gZnVuY3Rpb24oZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBUaGVtZSBjb25maWd1cmF0aW9uXG4gICAgICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXJcbiAgICAgICAgICAgICAgICAudGhlbWUoJ2ZvcmVzdCcpXG4gICAgICAgICAgICAgICAgLnByaW1hcnlQYWxldHRlKCdibHVlJylcbiAgICAgICAgICAgICAgICAuYWNjZW50UGFsZXR0ZSgndGVhbCcpXG4gICAgICAgICAgICAgICAgLndhcm5QYWxldHRlKCdyZWQnKVxuICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kUGFsZXR0ZSgnZ3JleScpO1xuICAgICAgICB9KTtcblxufSgpKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gaW5qZWN0aW5nIGRlcGVuZGVuY2llc1xuICAgIE1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbXG4gICAgICAgICckc2NvcGUnLCAnJHJvb3RTY29wZScsICckbG9jYXRpb24nXG4gICAgXTtcblxuICAgIC8vIHJlZ2lzdGVyaW5nIG9uIGFuZ3VsYXJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgTWFpbkNvbnRyb2xsZXIpO1xuXG4gICAgLy8gTWFpbiBDb250cm9sbGVyXG4gICAgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJHNjb3BlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24pIHtcblxuICAgICAgICAvLyAkcm9vdFNjb3BlLnNlcnZlclVybCA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvJztcbiAgICAgICAgJHJvb3RTY29wZS5zZXJ2ZXJVcmwgPSAnaHR0cHM6Ly9kZXYtc2lzdGVtYXMtc2VydmVyLmhlcm9rdWFwcC5jb20vJztcblxuICAgICAgICAkc2NvcGUubWVudSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5sb2dvdXQgPSAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdDUkVERU5USUFMJyk7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIGlmICgkbG9jYXRpb24ucGF0aCgpID09PSAnL2VtcHJlc2FzJylcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudE1lbnVJbmRleCA9MTtcblxuICAgICAgICAgICAgZWxzZSBpZiAoJGxvY2F0aW9uLnBhdGgoKSA9PT0gJy9zb2xpY2l0YWNhbycpXG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRNZW51SW5kZXggPSAwO1xuXG4gICAgICAgICAgICBlbHNlIGlmICgkbG9jYXRpb24ucGF0aCgpID09PSAnL2VzdGFnaW9zJylcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudE1lbnVJbmRleCA9IDI7XG5cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudE1lbnVJbmRleCA9IC0xO1xuXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmlzTG9naW4gPSAkbG9jYXRpb24ucGF0aCgpID09PSAnL2xvZ2luJyA/IHRydWUgOiBmYWxzZTtcblxuICAgICAgICB9KTtcblxuICAgIH1cbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCBBcHBsaWNhdGlvbkNvbmZpZ10pO1xuXG4gICAgZnVuY3Rpb24gQXBwbGljYXRpb25Db25maWcoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXG5cbiAgICAgICAgICAgIC53aGVuKCcvbG9naW4nLCB7XG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyA6ICdhcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5odG1sJyxcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcicgIDogJ0xvZ2luQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC53aGVuKCcvc29saWNpdGFjYW8nLCB7XG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyA6ICdhcHAvY29tcG9uZW50cy9zb2xpY2l0YXRpb24vc29saWNpdGF0aW9uLmh0bWwnLFxuICAgICAgICAgICAgICAgICdjb250cm9sbGVyJyAgOiAnU29saWNpdGF0aW9uQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC53aGVuKCcvZW1wcmVzYXMnLCB7XG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyA6ICdhcHAvY29tcG9uZW50cy9jb21wYW5pZXMvY29tcGFuaWVzLmh0bWwnLFxuICAgICAgICAgICAgICAgICdjb250cm9sbGVyJyAgOiAnQ29tcGFuaWVzQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC53aGVuKCcvZXN0YWdpb3MnLCB7XG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyA6ICdhcHAvY29tcG9uZW50cy9pbnRlcm5zaGlwcy9pbnRlcm5zaGlwcy5odG1sJyxcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcicgIDogJ0ludGVybnNoaXBzQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC53aGVuKCcvcmVnaXN0cm8nLCB7XG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyA6ICdhcHAvY29tcG9uZW50cy9sb2dpbi9yZWdpc3Rlci5odG1sJyxcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcicgIDogJ1JlZ2lzdGVyQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgICdyZWRpcmVjdFRvJzogJy9sb2dpbidcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICB9XG59KCkpOyIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignQ29tcGFuaWVzQ29udHJvbGxlcicsIENvbXBhbmllc0NvbnRyb2xsZXIpO1xuXG4gICAgQ29tcGFuaWVzQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJyRtZERpYWxvZycsICdjb21wYW5pZXNTZXJ2aWNlJyBdO1xuXG4gICAgZnVuY3Rpb24gQ29tcGFuaWVzQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZywgY29tcGFuaWVzU2VydmljZSkge1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldENvbXBhbmllcyhuYW1lKSB7XG5cbiAgICAgICAgICAgIGNvbXBhbmllc1NlcnZpY2UuZ2V0KG5hbWUpXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oY29tcGFuaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jb21wYW5pZXMgPSBjb21wYW5pZXM7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNob3dEaWFsb2cgPSBmdW5jdGlvbihjb21wYW55KSB7XG5cbiAgICAgICAgICAgIGlmIChjb21wYW55LnN0YXR1cyA9PT0gJ0FndWFyZGFuZG8gYXByb3Zhw6fDo28nKVxuICAgICAgICAgICAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgJ2NvbnRyb2xsZXInICAgICAgICAgIDogJ01hbmFnZUNvbXBhbnlDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyAgICAgICAgIDogJ2FwcC9zaGFyZWQvdGVtcGxhdGVzL21vZGFscy9jb21wYW55LWRpYWxvZy5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmVudCcgICAgICAgICAgICAgIDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICAgICAgICAgICAgICAnbG9jYWxzJyAgICAgICAgICAgICAgOiB7ICdjb21wYW55JzogY29tcGFueSB9LFxuICAgICAgICAgICAgICAgICAgICAnY2xpY2tPdXRzaWRlVG9DbG9zZScgOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBnZXRDb21wYW5pZXMobmFtZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XG5cbiAgICAgICAgICAgICRzY29wZS5jb21wYW55U2VsZWN0ZWQgPSBbXTtcbiAgICAgICAgICAgIGdldENvbXBhbmllcygpO1xuICAgICAgICB9KCkpO1xuICAgIH1cbn0oKSk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ0hvbWVDb250cm9sbGVyJywgSG9tZUNvbnRyb2xsZXIpO1xuXG4gICAgSG9tZUNvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScgXTtcblxuICAgIGZ1bmN0aW9uIEhvbWVDb250cm9sbGVyKCRzY29wZSkge1xuXG4gICAgICAgICRzY29wZS5hcHByb3ZlU29saWNpdGF0aW9uID0gIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmluc2VydFNvbGljaXRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIH07XG4gICAgfVxufSgpKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignSW50ZXJuc2hpcHNDb250cm9sbGVyJywgSW50ZXJuc2hpcHNDb250cm9sbGVyKTtcblxuICAgIEludGVybnNoaXBzQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJyRtZERpYWxvZycsICdpbnRlcm5zaGlwc1NlcnZpY2UnIF07XG5cbiAgICBmdW5jdGlvbiBJbnRlcm5zaGlwc0NvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2csIGludGVybnNoaXBzU2VydmljZSkge1xuXG4gICAgICAgICRzY29wZS5zaG93RGlhbG9nID0gZnVuY3Rpb24oaW50ZXJuc2hpcCwgY3JlZGVudGlhbCkge1xuICAgICAgICAgICAgaWYgKGludGVybnNoaXAuc3RhdHVzID09PSAnQWd1YXJkYW5kbyBhcHJvdmHDp8OjbycgJiYgKCRzY29wZS5jcmVkZW50aWFsLnJvbGUgPT09ICdjb29yZGluYXRvcicgfHwgJHNjb3BlLmNyZWRlbnRpYWwucm9sZSA9PT0gJ3N0dWRlbnQnKSlcbiAgICAgICAgICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgICdjb250cm9sbGVyJyAgICAgICAgICA6ICdJbnRlcm5zaGlwRGlhbG9nQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVVybCcgICAgICAgICA6ICdhcHAvc2hhcmVkL3RlbXBsYXRlcy9tb2RhbHMvaW50ZXJuc2hpcC1kaWFsb2cuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgICdwYXJlbnQnICAgICAgICAgICAgICA6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgICAgICAgICAgICAgJ2xvY2FscycgICAgICAgICAgICAgIDogeyAnaW50ZXJuc2hpcCc6IGludGVybnNoaXAgfHwge30sICdjcmVkZW50aWFsJzogY3JlZGVudGlhbCB9LFxuICAgICAgICAgICAgICAgICAgICAnY2xpY2tPdXRzaWRlVG9DbG9zZScgOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgICAgICAgICB2YXIgcSA9IHsnY3JlZGVudGlhbElkJzogJHNjb3BlLmNyZWRlbnRpYWwuX2lkfTtcblxuICAgICAgICAgICAgaWYgKHF1ZXJ5Lm5hbWUpXG4gICAgICAgICAgICAgICAgcS5uYW1lID0gcXVlcnkubmFtZS50cmltKCk7XG5cbiAgICAgICAgICAgIGlmIChxdWVyeS5zdGF0dXMgJiYgcXVlcnkuc3RhdHVzLnRyaW0oKSAhPT0gJ1RvZG9zJylcbiAgICAgICAgICAgICAgICBxLnN0YXR1cyA9IHF1ZXJ5LnN0YXR1cy50cmltKCk7XG5cbiAgICAgICAgICAgIGludGVybnNoaXBzU2VydmljZS5nZXQocSlcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihpbnRlcm5zaGlwcykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJuc2hpcHMgPSBpbnRlcm5zaGlwcztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVhc29uKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSB7fTtcblxuICAgICAgICAgICAgJHNjb3BlLnF1ZXJ5ID0ge307XG5cbiAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSBbJ1RvZG9zJywgJ0VtIGFuZGFtZW50bycsICdSZXByb3ZhZG8nLCAnQ2FuY2VsYWRvJywgJ0FndWFyZGFuZG8gYXByb3Zhw6fDo28nLCAnRmluYWxpemFkbyddO1xuXG4gICAgICAgICAgICAkc2NvcGUuY3JlZGVudGlhbCA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdDUkVERU5USUFMJykpIHx8IHt9O1xuXG4gICAgICAgICAgICAkc2NvcGUuaXNTdHVkZW50ID0gJHNjb3BlLmNyZWRlbnRpYWwucm9sZSA9PT0gJ3N0dWRlbnQnID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgICAgICAgICBxdWVyeSA9IHsnY3JlZGVudGlhbElkJzogJHNjb3BlLmNyZWRlbnRpYWwuX2lkfTtcblxuICAgICAgICAgICAgaW50ZXJuc2hpcHNTZXJ2aWNlLmdldChxdWVyeSlcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihpbnRlcm5zaGlwcykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJuc2hpcHMgPSBpbnRlcm5zaGlwcztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVhc29uKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSgpKTtcbiAgICB9XG59KCkpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBMb2dpbkNvbnRyb2xsZXIpO1xuXG4gICAgTG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbICckc2NvcGUnLCAnY3JlZGVudGlhbHNTZXJ2aWNlJywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJyBdO1xuXG4gICAgZnVuY3Rpb24gTG9naW5Db250cm9sbGVyKCRzY29wZSwgY3JlZGVudGlhbHNTZXJ2aWNlLCAkbG9jYXRpb24sICRyb290U2NvcGUpIHtcblxuICAgICAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbihlbWFpbCwgcGFzcykge1xuICAgICAgICAgICAgdmFyIGNyZWRlbnRpYWwgPSB7XG4gICAgICAgICAgICAgICAgJ2VtYWlsJzogZW1haWwsXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY3JlZGVudGlhbHNTZXJ2aWNlLmxvZ2luKGNyZWRlbnRpYWwpXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGNyZWRlbnRpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNyZWRlbnRpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnQ1JFREVOVElBTCcsIEpTT04uc3RyaW5naWZ5KGNyZWRlbnRpYWwpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuY3JlZGVudGlhbCA9IGNyZWRlbnRpYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2VzdGFnaW9zJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzV3JvbmdMb2dpbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIChmdW5jdGlvbiBpbml0KCkge1xuXG4gICAgICAgIH0oKSk7XG4gICAgfVxufSgpKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgUmVnaXN0ZXJDb250cm9sbGVyKTtcblxuICAgIFJlZ2lzdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJ2NyZWRlbnRpYWxzU2VydmljZScsICckbG9jYXRpb24nLCAnJG1kVG9hc3QnLCAnJHRpbWVvdXQnIF07XG5cbiAgICBmdW5jdGlvbiBSZWdpc3RlckNvbnRyb2xsZXIoJHNjb3BlLCBjcmVkZW50aWFsc1NlcnZpY2UsICRsb2NhdGlvbiwgJG1kVG9hc3QsICR0aW1lb3V0KSB7XG5cbiAgICAgICAgJHNjb3BlLmNyZWF0ZUFjY291bnQgPSBmdW5jdGlvbih1c3IpIHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzU2VydmljZS5jcmVhdGUodXNyKVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnVXN1w6FyaW8gY3JpYWRvIGNvbSBzdWNlc3NvJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKCdib3R0b20nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uKCcvbG9naW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVhc29uKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICB9XG59KCkpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdTb2xpY2l0YXRpb25Db250cm9sbGVyJywgU29saWNpdGF0aW9uQ29udHJvbGxlcik7XG5cbiAgICBTb2xpY2l0YXRpb25Db250cm9sbGVyLiRpbmplY3QgPSBbICckc2NvcGUnIF07XG5cbiAgICBmdW5jdGlvbiBTb2xpY2l0YXRpb25Db250cm9sbGVyKCRzY29wZSkge1xuXG4gICAgICAgICRzY29wZS5hcHByb3ZlU29saWNpdGF0aW9uID0gIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmluc2VydFNvbGljaXRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIH0oKSk7XG5cbiAgICB9XG59KCkpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIENvbXBhbmllc1NlcnZpY2UoJGh0dHAsICRyb290U2NvcGUpIHtcblxuICAgICAgICB2YXIgbW9kdWxlID0gJ2NvbXBhbmllcyc7XG5cbiAgICAgICAgdGhpcy5jcmVhdGUgPSBmdW5jdGlvbiAoY29tcGFueSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUsIGNvbXBhbnkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGNvbXBhbnkpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wdXQoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUsIGNvbXBhbnkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSAkcm9vdFNjb3BlLnNlcnZlclVybCArIG1vZHVsZTtcblxuICAgICAgICAgICAgaWYgKG5hbWUpXG4gICAgICAgICAgICAgICAgdXJsID0gdXJsICsgJy8nICsgbmFtZTtcblxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIENvbXBhbmllc1NlcnZpY2UuJGluamVjdCA9IFsgJyRodHRwJywgJyRyb290U2NvcGUnIF07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLnNlcnZpY2UoJ2NvbXBhbmllc1NlcnZpY2UnLCBDb21wYW5pZXNTZXJ2aWNlKTtcblxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gQ3JlZGVudGlhbHNTZXJ2aWNlKCRodHRwLCAkcm9vdFNjb3BlKSB7XG5cbiAgICAgICAgdmFyIG1vZHVsZSA9ICdjcmVkZW50aWFscyc7XG5cbiAgICAgICAgdGhpcy5sb2dpbiA9IGZ1bmN0aW9uIChjcmVkZW50aWFsKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnlzdHJpbmcgPSAnP2VtYWlsPScgKyBjcmVkZW50aWFsLmVtYWlsICsgJyZwYXNzd29yZD0nICsgY3JlZGVudGlhbC5wYXNzd29yZDtcblxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgkcm9vdFNjb3BlLnNlcnZlclVybCArIG1vZHVsZSArICcvJyArIHF1ZXJ5c3RyaW5nKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNyZWF0ZSA9ICBmdW5jdGlvbih1c3IpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCRyb290U2NvcGUuc2VydmVyVXJsICsgbW9kdWxlLCB1c3IpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubG9nb3V0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCRyb290U2NvcGUuc2VydmVyVXJsICsgbW9kdWxlICsgJy8nICsgdG9rZW4pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIENyZWRlbnRpYWxzU2VydmljZS4kaW5qZWN0ID0gWyAnJGh0dHAnLCAnJHJvb3RTY29wZScgXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuc2VydmljZSgnY3JlZGVudGlhbHNTZXJ2aWNlJywgQ3JlZGVudGlhbHNTZXJ2aWNlKTtcblxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gSW50ZXJuc2hpcHNTZXJ2aWNlKCRodHRwLCAkcm9vdFNjb3BlKSB7XG5cbiAgICAgICAgdmFyIG1vZHVsZSA9ICdpbnRlcm5zaGlwcyc7XG5cbiAgICAgICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSAkcm9vdFNjb3BlLnNlcnZlclVybCArIG1vZHVsZSArICcvPyc7XG5cbiAgICAgICAgICAgIGlmIChxdWVyeS5jcmVkZW50aWFsSWQpXG4gICAgICAgICAgICAgICAgdXJsICs9ICdjcmVkZW50aWFsSWQ9JyArIHF1ZXJ5LmNyZWRlbnRpYWxJZDtcblxuICAgICAgICAgICAgaWYgKHF1ZXJ5LnN0YXR1cylcbiAgICAgICAgICAgICAgICB1cmwgKz0gJyZzdGF0dXM9JyArIHF1ZXJ5LnN0YXR1cztcblxuICAgICAgICAgICAgaWYgKHF1ZXJ5Lm5hbWUpXG4gICAgICAgICAgICAgICAgdXJsICs9ICcmbmFtZT0nICsgcXVlcnkubmFtZTtcblxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGludGVybnNoaXApIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wdXQoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUsIGludGVybnNoaXApO1xuICAgICAgICB9O1xuXG4gICAgfVxuXG4gICAgSW50ZXJuc2hpcHNTZXJ2aWNlLiRpbmplY3QgPSBbICckaHR0cCcsICckcm9vdFNjb3BlJyBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5zZXJ2aWNlKCdpbnRlcm5zaGlwc1NlcnZpY2UnLCBJbnRlcm5zaGlwc1NlcnZpY2UpO1xuXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBNYW5hZ2VDb21wYW55Q29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZywgY29tcGFuaWVzU2VydmljZSwgbG9jYWxzKSB7XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbihjb21wYW55LCBzdGF0dXMpIHtcblxuICAgICAgICAgICAgJHNjb3BlLmlzTG9hZGluZ0NvbXBhbnkgPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSB0cnVlKVxuICAgICAgICAgICAgICAgIGNvbXBhbnkuc3RhdHVzID0gJ0Fwcm92YWRvJztcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjb21wYW55LnN0YXR1cyA9ICdSZXByb3ZhZG8nO1xuXG5cbiAgICAgICAgICAgIGNvbXBhbmllc1NlcnZpY2UudXBkYXRlKGNvbXBhbnkpXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNMb2FkaW5nQ29tcGFueSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuaGlkZShjb21wYW55KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmdDb21wYW55ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmNsb3NlRGlhbG9nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICAkc2NvcGUuY29tcGFueSA9IGxvY2Fscy5jb21wYW55IHx8IHt9O1xuICAgICAgICB9KSgpO1xuICAgIH1cblxuICAgIE1hbmFnZUNvbXBhbnlDb250cm9sbGVyLiRpbmplY3QgPSBbICckc2NvcGUnLCAnJG1kRGlhbG9nJywgJ2NvbXBhbmllc1NlcnZpY2UnLCAnbG9jYWxzJyBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdNYW5hZ2VDb21wYW55Q29udHJvbGxlcicsIE1hbmFnZUNvbXBhbnlDb250cm9sbGVyKTtcblxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gSW50ZXJuc2hpcERpYWxvZ0NvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2csIGludGVybnNoaXBzU2VydmljZSwgbG9jYWxzKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlSW50ZXJuc2hpcCgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc1NhdmluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIGludGVybnNoaXBzU2VydmljZS51cGRhdGUoJHNjb3BlLmludGVybnNoaXApXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pc1NhdmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuaGlkZSgkc2NvcGUuaW50ZXJuc2hpcCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNTYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oaXNBcHByb3ZlKSB7XG5cbiAgICAgICAgICAgIGlmIChpc0FwcHJvdmUgJiYgJHNjb3BlLmNyZWRlbnRpYWwucm9sZSA9PT0gJ2Nvb3JkaW5hdG9yJykge1xuICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcm5zaGlwLnN0YXR1cyA9ICdFbSBhbmRhbWVudG8nO1xuICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcm5zaGlwLmJlZ2luICA9IG1vbWVudCgpLmZvcm1hdCgnREQvTU0vWVlZWScpO1xuICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcm5zaGlwLmVuZCAgICA9IG1vbWVudChtb21lbnQoKSkuYWRkKDYsICdtb250aHMnKS5mb3JtYXQoJ0REL01NL1lZWVknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFpc0FwcHJvdmUgJiYgJHNjb3BlLmNyZWRlbnRpYWwucm9sZSA9PT0gJ2Nvb3JkaW5hdG9yJylcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJuc2hpcC5zdGF0dXMgPSAnUmVwcm92YWRvJztcblxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzQXBwcm92ZSAmJiAkc2NvcGUuY3JlZGVudGlhbC5yb2xlID09PSAnc3R1ZGVudCcpXG4gICAgICAgICAgICAgICAgJHNjb3BlLmludGVybnNoaXAuc3RhdHVzID0gJ0NhbmNlbGFkbyc7XG5cbiAgICAgICAgICAgIHVwZGF0ZUludGVybnNoaXAoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuY2xvc2VEaWFsb2cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRtZERpYWxvZy5jYW5jZWwoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgICRzY29wZS5pbnRlcm5zaGlwID0gbG9jYWxzLmludGVybnNoaXAgfHwge307XG4gICAgICAgICAgICAkc2NvcGUuY3JlZGVudGlhbCA9IGxvY2Fscy5jcmVkZW50aWFsIHx8IHt9O1xuICAgICAgICB9KSgpO1xuICAgIH1cblxuICAgIEludGVybnNoaXBEaWFsb2dDb250cm9sbGVyLiRpbmplY3QgPSBbICckc2NvcGUnLCAnJG1kRGlhbG9nJywgJ2ludGVybnNoaXBzU2VydmljZScsICdsb2NhbHMnIF07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ0ludGVybnNoaXBEaWFsb2dDb250cm9sbGVyJywgSW50ZXJuc2hpcERpYWxvZ0NvbnRyb2xsZXIpO1xuXG59KCkpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
