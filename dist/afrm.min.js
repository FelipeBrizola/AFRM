!function(){"use strict";angular.module("afrmApp",["ngMaterial","ngAnimate","ngRoute","angular.filter","md.data.table"]).config(["$mdThemingProvider","$mdDateLocaleProvider",function(o,n){n.formatDate=function(o){return moment(o).format("YYYY-MM-DD")},o.theme("forest").primaryPalette("blue").accentPalette("teal").warnPalette("red").backgroundPalette("grey")}])}(),function(){"use strict";function o(o,n,e){n.serverUrl="http://localhost:3000/",o.menu=function(o){e.path(o)}}o.$inject=["$scope","$rootScope","$location"],angular.module("afrmApp").controller("MainController",o)}(),function(){"use strict";function o(o,n){o.when("/",{templateUrl:"app/components/home/home.html",controller:"HomeController"}).when("/login",{templateUrl:"app/components/login/login.html",controller:"LoginController"}).when("/solicitacao",{templateUrl:"app/components/solicitation/solicitation.html",controller:"SolicitationController"}).when("/empresas",{templateUrl:"app/components/companies/companies.html",controller:"CompaniesController"}).when("/estagios",{templateUrl:"app/components/internships/internships.html",controller:"InternshipsController"}).when("/registro",{templateUrl:"app/components/login/register.html",controller:"RegisterController"}).otherwise({redirectTo:"/"}),n.html5Mode(!0)}angular.module("afrmApp").config(["$routeProvider","$locationProvider",o])}(),function(){"use strict";function o(o,n,e){o.showDialog=function(e){n.show({controller:"ManageCompanyController",templateUrl:"app/shared/templates/modals/manage-company.html",parent:angular.element(document.body),locals:{company:e||null},clickOutsideToClose:!0}).then(function(n,e){n&&(e?o.companies.push(n):o.companies.forEach(function(o){o._id===n._id&&(o=n)}))},function(){})},function(){e.get().success(function(n){o.companies=n}).error(function(o){console.log(o)})}()}angular.module("afrmApp").controller("CompaniesController",o),o.$inject=["$scope","$mdDialog","companiesService"]}(),function(){"use strict";function o(o){o.approveSolicitation=function(){},o.insertSolicitation=function(){}}angular.module("afrmApp").controller("HomeController",o),o.$inject=["$scope"]}(),function(){"use strict";function o(o,n,e){o.showDialog=function(o){n.show({controller:"InternshipDialogController",templateUrl:"app/shared/templates/modals/internship-dialog.html",parent:angular.element(document.body),locals:{internship:o||null},clickOutsideToClose:!0}).then(function(){},function(){})},function(){var n;o.status=["Aprovado","Em andamento","Reprovado","Cancelado","Aguardando aprovação"],o.credential=JSON.parse(window.localStorage.getItem("CREDENTIAL")),o.isStudent="student"===o.credential.role,n="student"===o.credential.role?o.credential._id:null,e.get(n).success(function(n){o.internships=n}).error(function(o){console.log(o)})}()}angular.module("afrmApp").controller("InternshipsController",o),o.$inject=["$scope","$mdDialog","internshipsService"]}(),function(){"use strict";function o(o,n,e){o.login=function(o,t){var r={email:o,password:t};n.login(r).success(function(o){o&&(window.localStorage.setItem("CREDENTIAL",JSON.stringify(o)),e.path("/estagios"))}).error(function(o){console.log(o)})},function(){console.log("logincontroller")}()}angular.module("afrmApp").controller("LoginController",o),o.$inject=["$scope","credentialsService","$location"]}(),function(){"use strict";function o(o,n,e,t,r){o.createAccount=function(o){n.create(o).success(function(o){o&&(t.show(t.simple().textContent("Usuário criado com sucesso").position("bottom").hideDelay(3e3)),r(function(){e("/login")},3e3))}).error(function(o){console.log(o)})}}angular.module("afrmApp").controller("RegisterController",o),o.$inject=["$scope","credentialsService","$location","$mdToast","$timeout"]}(),function(){"use strict";function o(o){o.approveSolicitation=function(){},o.insertSolicitation=function(){}}angular.module("afrmApp").controller("SolicitationController",o),o.$inject=["$scope"]}(),function(){"use strict";function o(o,n){var e="companies";this.create=function(t){return o.post(n.serverUrl+e,t)},this.update=function(t){return o.put(n.serverUrl+e,t)},this.get=function(){return o.get(n.serverUrl+e)}}o.$inject=["$http","$rootScope"],angular.module("afrmApp").service("companiesService",o)}(),function(){"use strict";function o(o,n){var e="credentials";this.login=function(t){var r="?email="+t.email+"&password="+t.password;return o.get(n.serverUrl+e+"/"+r)},this.create=function(t){return o.post(n.serverUrl+e,t)},this.logout=function(t){return o.get(n.serverUrl+e+"/"+t)}}o.$inject=["$http","$rootScope"],angular.module("afrmApp").service("credentialsService",o)}(),function(){"use strict";function o(o,n){var e="internships";this.get=function(t){var r=n.serverUrl+e+"/";return t&&(r+=t),o.get(r)}}o.$inject=["$http","$rootScope"],angular.module("afrmApp").service("internshipsService",o)}(),function(){"use strict";function o(o,n,e){o.save=function(o){return o},function(){o.internship=e.internship||{}}()}o.$inject=["$scope","$mdDialog","locals"],angular.module("afrmApp").controller("InternshipDialogController",o)}(),function(){"use strict";function o(o,n,e,t){o.save=function(t){var r;o.isLoadingCompany=!0,o.isEditing?(r=!1,e.update(t).success(function(e){o.isLoadingCompany=!1,n.hide(e,r)}).error(function(n){o.isLoadingCompany=!1,console.log(n)})):(r=!0,e.create(t).success(function(e){o.isLoadingCompany=!1,n.hide(e,r)}).error(function(n){o.isLoadingCompany=!1,console.log(n)}))},function(){t.company&&(o.isEditing=!0),o.company=t.company||{}}()}o.$inject=["$scope","$mdDialog","companiesService","locals"],angular.module("afrmApp").controller("ManageCompanyController",o)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC1tb2R1bGUuanMiLCJhcHAtY29udHJvbGxlci5qcyIsImFwcC1yb3V0ZXMuanMiLCJjb21wb25lbnRzL2NvbXBhbmllcy9jb21wYW5pZXMuY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2ludGVybnNoaXBzL2ludGVybnNoaXBzLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2luL3JlZ2lzdGVyLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL3NvbGljaXRhdGlvbi9zb2xpY2l0YXRpb24uY29udHJvbGxlci5qcyIsInNoYXJlZC9zZXJ2aWNlcy9jb21wYW5pZXMuc2VydmljZS5qcyIsInNoYXJlZC9zZXJ2aWNlcy9jcmVkZW50aWFscy5zZXJ2aWNlLmpzIiwic2hhcmVkL3NlcnZpY2VzL2ludGVybnNoaXBzLnNlcnZpY2UuanMiLCJzaGFyZWQvdGVtcGxhdGVzL21vZGFscy9pbnRlcm5zaGlwLmRpYWxvZy5jb250cm9sbGVyLmpzIiwic2hhcmVkL3RlbXBsYXRlcy9tb2RhbHMvbWFuYWdlLWNvbXBhbnkuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJG1kRGF0ZUxvY2FsZVByb3ZpZGVyIiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJtb21lbnQiLCJmb3JtYXQiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsIndhcm5QYWxldHRlIiwiYmFja2dyb3VuZFBhbGV0dGUiLCJNYWluQ29udHJvbGxlciIsIiRzY29wZSIsIiRyb290U2NvcGUiLCIkbG9jYXRpb24iLCJzZXJ2ZXJVcmwiLCJtZW51IiwicGF0aCIsIiRpbmplY3QiLCJjb250cm9sbGVyIiwiQXBwbGljYXRpb25Db25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImh0bWw1TW9kZSIsIkNvbXBhbmllc0NvbnRyb2xsZXIiLCIkbWREaWFsb2ciLCJjb21wYW5pZXNTZXJ2aWNlIiwic2hvd0RpYWxvZyIsImNvbXBhbnkiLCJzaG93IiwicGFyZW50IiwiZWxlbWVudCIsImRvY3VtZW50IiwiYm9keSIsImxvY2FscyIsImNsaWNrT3V0c2lkZVRvQ2xvc2UiLCJ0aGVuIiwiaXNOZXdDb21wYW55IiwiY29tcGFuaWVzIiwicHVzaCIsImZvckVhY2giLCJjb21wIiwiX2lkIiwiZ2V0Iiwic3VjY2VzcyIsImVycm9yIiwicmVhc29uIiwiY29uc29sZSIsImxvZyIsIkhvbWVDb250cm9sbGVyIiwiYXBwcm92ZVNvbGljaXRhdGlvbiIsImluc2VydFNvbGljaXRhdGlvbiIsIkludGVybnNoaXBzQ29udHJvbGxlciIsImludGVybnNoaXBzU2VydmljZSIsImludGVybnNoaXAiLCJjcmVkZW50aWFsSWQiLCJzdGF0dXMiLCJjcmVkZW50aWFsIiwiSlNPTiIsInBhcnNlIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImlzU3R1ZGVudCIsInJvbGUiLCJpbnRlcm5zaGlwcyIsIkxvZ2luQ29udHJvbGxlciIsImNyZWRlbnRpYWxzU2VydmljZSIsImxvZ2luIiwiZW1haWwiLCJwYXNzIiwicGFzc3dvcmQiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiUmVnaXN0ZXJDb250cm9sbGVyIiwiJG1kVG9hc3QiLCIkdGltZW91dCIsImNyZWF0ZUFjY291bnQiLCJ1c3IiLCJjcmVhdGUiLCJyZXN1bHQiLCJzaW1wbGUiLCJ0ZXh0Q29udGVudCIsInBvc2l0aW9uIiwiaGlkZURlbGF5IiwiU29saWNpdGF0aW9uQ29udHJvbGxlciIsIkNvbXBhbmllc1NlcnZpY2UiLCIkaHR0cCIsInRoaXMiLCJwb3N0IiwidXBkYXRlIiwicHV0Iiwic2VydmljZSIsIkNyZWRlbnRpYWxzU2VydmljZSIsInF1ZXJ5c3RyaW5nIiwibG9nb3V0IiwidG9rZW4iLCJJbnRlcm5zaGlwc1NlcnZpY2UiLCJzdHVkZW50SWQiLCJ1cmwiLCJJbnRlcm5zaGlwRGlhbG9nQ29udHJvbGxlciIsInNhdmUiLCJNYW5hZ2VDb21wYW55Q29udHJvbGxlciIsImlzTG9hZGluZ0NvbXBhbnkiLCJpc0VkaXRpbmciLCJjb21wYW55RWRpdGVkIiwiaGlkZSIsIm5ld0NvbXBhbnkiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFHQUEsU0FBQUMsT0FBQSxXQUNBLGFBQ0EsWUFDQSxVQUNBLGlCQUNBLGtCQUdBQyxRQUFBLHFCQUFBLHdCQUFBLFNBQUFDLEVBQUFDLEdBR0FBLEVBQUFDLFdBQUEsU0FBQUMsR0FDQSxNQUFBQyxRQUFBRCxHQUFBRSxPQUFBLGVBSUFMLEVBQ0FNLE1BQUEsVUFDQUMsZUFBQSxRQUNBQyxjQUFBLFFBQ0FDLFlBQUEsT0FDQUMsa0JBQUEsY0N6QkEsV0FDQSxZQVdBLFNBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLEdBRUFELEVBQUFFLFVBQUEseUJBR0FILEVBQUFJLEtBQUEsU0FBQUMsR0FDQUgsRUFBQUcsS0FBQUEsSUFkQU4sRUFBQU8sU0FDQSxTQUFBLGFBQUEsYUFJQXJCLFFBQUFDLE9BQUEsV0FBQXFCLFdBQUEsaUJBQUFSLE1DVEEsV0FDQSxZQUlBLFNBQUFTLEdBQUFDLEVBQUFDLEdBQ0FELEVBRUFFLEtBQUEsS0FDQUMsWUFBQSxnQ0FDQUwsV0FBQSxtQkFHQUksS0FBQSxVQUNBQyxZQUFBLGtDQUNBTCxXQUFBLG9CQUdBSSxLQUFBLGdCQUNBQyxZQUFBLGdEQUNBTCxXQUFBLDJCQUdBSSxLQUFBLGFBQ0FDLFlBQUEsMENBQ0FMLFdBQUEsd0JBR0FJLEtBQUEsYUFDQUMsWUFBQSw4Q0FDQUwsV0FBQSwwQkFHQUksS0FBQSxhQUNBQyxZQUFBLHFDQUNBTCxXQUFBLHVCQUdBTSxXQUNBQyxXQUFBLE1BR0FKLEVBQUFLLFdBQUEsR0F2Q0E5QixRQUFB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bGUiOiJhZnJtLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gTW9kdWxlIGRlcGVuZGVuY2llcyBpbmplY3Rpb25cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcsIFtcbiAgICAgICAgJ25nTWF0ZXJpYWwnLFxuICAgICAgICAnbmdBbmltYXRlJyxcbiAgICAgICAgJ25nUm91dGUnLFxuICAgICAgICAnYW5ndWxhci5maWx0ZXInLFxuICAgICAgICAnbWQuZGF0YS50YWJsZSdcbiAgICBdKVxuXG4gICAgICAgIC5jb25maWcoZnVuY3Rpb24gKCRtZFRoZW1pbmdQcm92aWRlciwgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyKSB7XG5cbiAgICAgICAgICAgIC8vIERhdGUgZm9ybWF0IGNvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgICRtZERhdGVMb2NhbGVQcm92aWRlci5mb3JtYXREYXRlID0gZnVuY3Rpb24oZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBUaGVtZSBjb25maWd1cmF0aW9uXG4gICAgICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXJcbiAgICAgICAgICAgICAgICAudGhlbWUoJ2ZvcmVzdCcpXG4gICAgICAgICAgICAgICAgLnByaW1hcnlQYWxldHRlKCdibHVlJylcbiAgICAgICAgICAgICAgICAuYWNjZW50UGFsZXR0ZSgndGVhbCcpXG4gICAgICAgICAgICAgICAgLndhcm5QYWxldHRlKCdyZWQnKVxuICAgICAgICAgICAgICAgIC5iYWNrZ3JvdW5kUGFsZXR0ZSgnZ3JleScpO1xuICAgICAgICB9KTtcblxufSgpKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gaW5qZWN0aW5nIGRlcGVuZGVuY2llc1xuICAgIE1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbXG4gICAgICAgICckc2NvcGUnLCAnJHJvb3RTY29wZScsICckbG9jYXRpb24nXG4gICAgXTtcblxuICAgIC8vIHJlZ2lzdGVyaW5nIG9uIGFuZ3VsYXJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgTWFpbkNvbnRyb2xsZXIpO1xuXG4gICAgLy8gTWFpbiBDb250cm9sbGVyXG4gICAgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJHNjb3BlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24pIHtcblxuICAgICAgICAkcm9vdFNjb3BlLnNlcnZlclVybCA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvJztcbiAgICAgICAgLy8gJHJvb3RTY29wZS5zZXJ2ZXJVcmwgPSAnaHR0cHM6Ly9kZXYtc2lzdGVtYXMuaGVyb2t1YXBwLmNvbS8nO1xuXG4gICAgICAgICRzY29wZS5tZW51ID0gZnVuY3Rpb24ocGF0aCkge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgocGF0aCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vICAgICAkcm9vdFNjb3BlLmlzTG9naW4gPSAkbG9jYXRpb24ucGF0aCgpID09PSAnL2xvZ2luJyA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgLy8gfSk7XG5cbiAgICB9XG59KCkpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgQXBwbGljYXRpb25Db25maWddKTtcblxuICAgIGZ1bmN0aW9uIEFwcGxpY2F0aW9uQ29uZmlnKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAgICAkcm91dGVQcm92aWRlclxuXG4gICAgICAgICAgICAud2hlbignLycsIHtcbiAgICAgICAgICAgICAgICAndGVtcGxhdGVVcmwnIDogJ2FwcC9jb21wb25lbnRzL2hvbWUvaG9tZS5odG1sJyxcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcicgIDogJ0hvbWVDb250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLndoZW4oJy9sb2dpbicsIHtcbiAgICAgICAgICAgICAgICAndGVtcGxhdGVVcmwnIDogJ2FwcC9jb21wb25lbnRzL2xvZ2luL2xvZ2luLmh0bWwnLFxuICAgICAgICAgICAgICAgICdjb250cm9sbGVyJyAgOiAnTG9naW5Db250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLndoZW4oJy9zb2xpY2l0YWNhbycsIHtcbiAgICAgICAgICAgICAgICAndGVtcGxhdGVVcmwnIDogJ2FwcC9jb21wb25lbnRzL3NvbGljaXRhdGlvbi9zb2xpY2l0YXRpb24uaHRtbCcsXG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsZXInICA6ICdTb2xpY2l0YXRpb25Db250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLndoZW4oJy9lbXByZXNhcycsIHtcbiAgICAgICAgICAgICAgICAndGVtcGxhdGVVcmwnIDogJ2FwcC9jb21wb25lbnRzL2NvbXBhbmllcy9jb21wYW5pZXMuaHRtbCcsXG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsZXInICA6ICdDb21wYW5pZXNDb250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLndoZW4oJy9lc3RhZ2lvcycsIHtcbiAgICAgICAgICAgICAgICAndGVtcGxhdGVVcmwnIDogJ2FwcC9jb21wb25lbnRzL2ludGVybnNoaXBzL2ludGVybnNoaXBzLmh0bWwnLFxuICAgICAgICAgICAgICAgICdjb250cm9sbGVyJyAgOiAnSW50ZXJuc2hpcHNDb250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLndoZW4oJy9yZWdpc3RybycsIHtcbiAgICAgICAgICAgICAgICAndGVtcGxhdGVVcmwnIDogJ2FwcC9jb21wb25lbnRzL2xvZ2luL3JlZ2lzdGVyLmh0bWwnLFxuICAgICAgICAgICAgICAgICdjb250cm9sbGVyJyAgOiAnUmVnaXN0ZXJDb250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLm90aGVyd2lzZSh7XG4gICAgICAgICAgICAgICAgJ3JlZGlyZWN0VG8nOiAnLydcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICB9XG59KCkpOyIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignQ29tcGFuaWVzQ29udHJvbGxlcicsIENvbXBhbmllc0NvbnRyb2xsZXIpO1xuXG4gICAgQ29tcGFuaWVzQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJyRtZERpYWxvZycsICdjb21wYW5pZXNTZXJ2aWNlJyBdO1xuXG4gICAgZnVuY3Rpb24gQ29tcGFuaWVzQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZywgY29tcGFuaWVzU2VydmljZSkge1xuXG4gICAgICAgIC8vIGNyaWEgb3UgZWRpdGEgY29tcGFueVxuICAgICAgICAkc2NvcGUuc2hvd0RpYWxvZyA9IGZ1bmN0aW9uKGNvbXBhbnkpIHtcblxuICAgICAgICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICAgICAgICAgICdjb250cm9sbGVyJzogJ01hbmFnZUNvbXBhbnlDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAndGVtcGxhdGVVcmwnOiAnYXBwL3NoYXJlZC90ZW1wbGF0ZXMvbW9kYWxzL21hbmFnZS1jb21wYW55Lmh0bWwnLFxuICAgICAgICAgICAgICAgICdwYXJlbnQnOiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICAgICAgICAgICAgJ2xvY2Fscyc6IHsgJ2NvbXBhbnknOiBjb21wYW55IHx8IG51bGwgfSxcbiAgICAgICAgICAgICAgICAnY2xpY2tPdXRzaWRlVG9DbG9zZSc6dHJ1ZVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihjb21wYW55LCBpc05ld0NvbXBhbnkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29tcGFueSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXdDb21wYW55KVxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbXBhbmllcy5wdXNoKGNvbXBhbnkpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb21wYW5pZXMuZm9yRWFjaChmdW5jdGlvbihjb21wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAuX2lkID09PSBjb21wYW55Ll9pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcCA9ICBjb21wYW55O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7fSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XG5cbiAgICAgICAgICAgIGNvbXBhbmllc1NlcnZpY2UuZ2V0KClcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihjb21wYW5pZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbXBhbmllcyA9IGNvbXBhbmllcztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVhc29uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSgpKTtcbiAgICB9XG59KCkpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIEhvbWVDb250cm9sbGVyKTtcblxuICAgIEhvbWVDb250cm9sbGVyLiRpbmplY3QgPSBbICckc2NvcGUnIF07XG5cbiAgICBmdW5jdGlvbiBIb21lQ29udHJvbGxlcigkc2NvcGUpIHtcblxuICAgICAgICAkc2NvcGUuYXBwcm92ZVNvbGljaXRhdGlvbiA9ICBmdW5jdGlvbigpIHtcblxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pbnNlcnRTb2xpY2l0YXRpb24gPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB9O1xuICAgIH1cbn0oKSk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ0ludGVybnNoaXBzQ29udHJvbGxlcicsIEludGVybnNoaXBzQ29udHJvbGxlcik7XG5cbiAgICBJbnRlcm5zaGlwc0NvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScsICckbWREaWFsb2cnLCAnaW50ZXJuc2hpcHNTZXJ2aWNlJyBdO1xuXG4gICAgZnVuY3Rpb24gSW50ZXJuc2hpcHNDb250cm9sbGVyKCRzY29wZSwgJG1kRGlhbG9nLCBpbnRlcm5zaGlwc1NlcnZpY2UpIHtcblxuICAgICAgICAkc2NvcGUuc2hvd0RpYWxvZyA9IGZ1bmN0aW9uKGludGVybnNoaXApIHtcblxuICAgICAgICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICAgICAgICAgICdjb250cm9sbGVyJzogJ0ludGVybnNoaXBEaWFsb2dDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAndGVtcGxhdGVVcmwnOiAnYXBwL3NoYXJlZC90ZW1wbGF0ZXMvbW9kYWxzL2ludGVybnNoaXAtZGlhbG9nLmh0bWwnLFxuICAgICAgICAgICAgICAgICdwYXJlbnQnOiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICAgICAgICAgICAgJ2xvY2Fscyc6IHsgJ2ludGVybnNoaXAnOiBpbnRlcm5zaGlwIHx8IG51bGwgfSxcbiAgICAgICAgICAgICAgICAnY2xpY2tPdXRzaWRlVG9DbG9zZSc6dHJ1ZVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7fSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICB2YXIgY3JlZGVudGlhbElkO1xuXG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gWydBcHJvdmFkbycsICdFbSBhbmRhbWVudG8nLCAnUmVwcm92YWRvJywgJ0NhbmNlbGFkbycsICdBZ3VhcmRhbmRvIGFwcm92YcOnw6NvJ107XG5cbiAgICAgICAgICAgICRzY29wZS5jcmVkZW50aWFsID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0NSRURFTlRJQUwnKSk7XG5cbiAgICAgICAgICAgICRzY29wZS5pc1N0dWRlbnQgPSAkc2NvcGUuY3JlZGVudGlhbC5yb2xlID09PSAnc3R1ZGVudCcgPyB0cnVlIDogZmFsc2U7XG5cbiAgICAgICAgICAgIGNyZWRlbnRpYWxJZCA9ICRzY29wZS5jcmVkZW50aWFsLnJvbGUgPT09ICdzdHVkZW50JyA/ICRzY29wZS5jcmVkZW50aWFsLl9pZCA6IG51bGw7XG5cbiAgICAgICAgICAgIGludGVybnNoaXBzU2VydmljZS5nZXQoY3JlZGVudGlhbElkKVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGludGVybnNoaXBzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcm5zaGlwcyA9IGludGVybnNoaXBzO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWFzb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0oKSk7XG4gICAgfVxufSgpKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgTG9naW5Db250cm9sbGVyKTtcblxuICAgIExvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJ2NyZWRlbnRpYWxzU2VydmljZScsICckbG9jYXRpb24nIF07XG5cbiAgICBmdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIoJHNjb3BlLCBjcmVkZW50aWFsc1NlcnZpY2UsICRsb2NhdGlvbikge1xuXG4gICAgICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKGVtYWlsLCBwYXNzKSB7XG4gICAgICAgICAgICB2YXIgY3JlZGVudGlhbCA9IHtcbiAgICAgICAgICAgICAgICAnZW1haWwnOiBlbWFpbCxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjcmVkZW50aWFsc1NlcnZpY2UubG9naW4oY3JlZGVudGlhbClcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoY3JlZGVudGlhbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3JlZGVudGlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdDUkVERU5USUFMJywgSlNPTi5zdHJpbmdpZnkoY3JlZGVudGlhbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9lc3RhZ2lvcycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9naW5jb250cm9sbGVyJyk7XG4gICAgICAgIH0oKSk7XG4gICAgfVxufSgpKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgUmVnaXN0ZXJDb250cm9sbGVyKTtcblxuICAgIFJlZ2lzdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJ2NyZWRlbnRpYWxzU2VydmljZScsICckbG9jYXRpb24nLCAnJG1kVG9hc3QnLCAnJHRpbWVvdXQnIF07XG5cbiAgICBmdW5jdGlvbiBSZWdpc3RlckNvbnRyb2xsZXIoJHNjb3BlLCBjcmVkZW50aWFsc1NlcnZpY2UsICRsb2NhdGlvbiwgJG1kVG9hc3QsICR0aW1lb3V0KSB7XG5cbiAgICAgICAgJHNjb3BlLmNyZWF0ZUFjY291bnQgPSBmdW5jdGlvbih1c3IpIHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzU2VydmljZS5jcmVhdGUodXNyKVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnVXN1w6FyaW8gY3JpYWRvIGNvbSBzdWNlc3NvJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKCdib3R0b20nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uKCcvbG9naW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVhc29uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgIH1cbn0oKSk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ1NvbGljaXRhdGlvbkNvbnRyb2xsZXInLCBTb2xpY2l0YXRpb25Db250cm9sbGVyKTtcblxuICAgIFNvbGljaXRhdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScgXTtcblxuICAgIGZ1bmN0aW9uIFNvbGljaXRhdGlvbkNvbnRyb2xsZXIoJHNjb3BlKSB7XG5cbiAgICAgICAgJHNjb3BlLmFwcHJvdmVTb2xpY2l0YXRpb24gPSAgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaW5zZXJ0U29saWNpdGF0aW9uID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgfTtcbiAgICB9XG59KCkpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIENvbXBhbmllc1NlcnZpY2UoJGh0dHAsICRyb290U2NvcGUpIHtcblxuICAgICAgICB2YXIgbW9kdWxlID0gJ2NvbXBhbmllcyc7XG5cbiAgICAgICAgdGhpcy5jcmVhdGUgPSBmdW5jdGlvbiAoY29tcGFueSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUsIGNvbXBhbnkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGNvbXBhbnkpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wdXQoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUsIGNvbXBhbnkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgkcm9vdFNjb3BlLnNlcnZlclVybCArIG1vZHVsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgQ29tcGFuaWVzU2VydmljZS4kaW5qZWN0ID0gWyAnJGh0dHAnLCAnJHJvb3RTY29wZScgXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuc2VydmljZSgnY29tcGFuaWVzU2VydmljZScsIENvbXBhbmllc1NlcnZpY2UpO1xuXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBDcmVkZW50aWFsc1NlcnZpY2UoJGh0dHAsICRyb290U2NvcGUpIHtcblxuICAgICAgICB2YXIgbW9kdWxlID0gJ2NyZWRlbnRpYWxzJztcblxuICAgICAgICB0aGlzLmxvZ2luID0gZnVuY3Rpb24gKGNyZWRlbnRpYWwpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeXN0cmluZyA9ICc/ZW1haWw9JyArIGNyZWRlbnRpYWwuZW1haWwgKyAnJnBhc3N3b3JkPScgKyBjcmVkZW50aWFsLnBhc3N3b3JkO1xuXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCRyb290U2NvcGUuc2VydmVyVXJsICsgbW9kdWxlICsgJy8nICsgcXVlcnlzdHJpbmcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY3JlYXRlID0gIGZ1bmN0aW9uKHVzcikge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUsIHVzcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5sb2dvdXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUgKyAnLycgKyB0b2tlbik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgQ3JlZGVudGlhbHNTZXJ2aWNlLiRpbmplY3QgPSBbICckaHR0cCcsICckcm9vdFNjb3BlJyBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5zZXJ2aWNlKCdjcmVkZW50aWFsc1NlcnZpY2UnLCBDcmVkZW50aWFsc1NlcnZpY2UpO1xuXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBJbnRlcm5zaGlwc1NlcnZpY2UoJGh0dHAsICRyb290U2NvcGUpIHtcblxuICAgICAgICB2YXIgbW9kdWxlID0gJ2ludGVybnNoaXBzJztcblxuICAgICAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChzdHVkZW50SWQpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSAkcm9vdFNjb3BlLnNlcnZlclVybCArIG1vZHVsZSArICcvJztcblxuICAgICAgICAgICAgaWYgKHN0dWRlbnRJZClcbiAgICAgICAgICAgICAgICB1cmwgKz0gc3R1ZGVudElkO1xuXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgSW50ZXJuc2hpcHNTZXJ2aWNlLiRpbmplY3QgPSBbICckaHR0cCcsICckcm9vdFNjb3BlJyBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5zZXJ2aWNlKCdpbnRlcm5zaGlwc1NlcnZpY2UnLCBJbnRlcm5zaGlwc1NlcnZpY2UpO1xuXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBJbnRlcm5zaGlwRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZywgbG9jYWxzKSB7XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbihpbnRlcm5zaGlwKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJuc2hpcDtcbiAgICAgICAgfTtcblxuICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgICRzY29wZS5pbnRlcm5zaGlwID0gbG9jYWxzLmludGVybnNoaXAgfHwge307XG4gICAgICAgIH0pKCk7XG4gICAgfVxuXG4gICAgSW50ZXJuc2hpcERpYWxvZ0NvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScsICckbWREaWFsb2cnLCAnbG9jYWxzJyBdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdJbnRlcm5zaGlwRGlhbG9nQ29udHJvbGxlcicsIEludGVybnNoaXBEaWFsb2dDb250cm9sbGVyKTtcblxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gTWFuYWdlQ29tcGFueUNvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2csIGNvbXBhbmllc1NlcnZpY2UsIGxvY2Fscykge1xuXG4gICAgICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oY29tcGFueSkge1xuICAgICAgICAgICAgdmFyIGlzTmV3Q29tcGFueTtcblxuICAgICAgICAgICAgJHNjb3BlLmlzTG9hZGluZ0NvbXBhbnkgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBwdXRcbiAgICAgICAgICAgIGlmICgkc2NvcGUuaXNFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgaXNOZXdDb21wYW55ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29tcGFuaWVzU2VydmljZS51cGRhdGUoY29tcGFueSlcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGNvbXBhbnlFZGl0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmdDb21wYW55ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuaGlkZShjb21wYW55RWRpdGVkLCBpc05ld0NvbXBhbnkpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzTG9hZGluZ0NvbXBhbnkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBwb3N0XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpc05ld0NvbXBhbnkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbXBhbmllc1NlcnZpY2UuY3JlYXRlKGNvbXBhbnkpXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChuZXdDb21wYW55KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNMb2FkaW5nQ29tcGFueSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmhpZGUobmV3Q29tcGFueSwgaXNOZXdDb21wYW55KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmdDb21wYW55ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHtcblxuICAgICAgICAgICAgLy8gZWRpdGEgb3UgY3JpYSBlbXByZXNhXG4gICAgICAgICAgICBpZiAobG9jYWxzLmNvbXBhbnkpXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzRWRpdGluZyA9IHRydWU7XG5cbiAgICAgICAgICAgICRzY29wZS5jb21wYW55ID0gbG9jYWxzLmNvbXBhbnkgfHwge307XG5cbiAgICAgICAgfSkoKTtcbiAgICB9XG5cbiAgICBNYW5hZ2VDb21wYW55Q29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJyRtZERpYWxvZycsICdjb21wYW5pZXNTZXJ2aWNlJywgJ2xvY2FscycgXTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignTWFuYWdlQ29tcGFueUNvbnRyb2xsZXInLCBNYW5hZ2VDb21wYW55Q29udHJvbGxlcik7XG5cbn0oKSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
