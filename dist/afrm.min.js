!function(){"use strict";angular.module("afrmApp",["ngMaterial","ngAnimate","ngRoute","angular.filter","md.data.table"]).config(["$mdThemingProvider","$mdDateLocaleProvider",function(n,e){e.formatDate=function(n){return moment(n).format("YYYY-MM-DD")},n.theme("forest").primaryPalette("blue").accentPalette("teal").warnPalette("red").backgroundPalette("grey")}])}(),function(){"use strict";function n(n,e,o){e.serverUrl="https://dev-sistemas.herokuapp.com/",n.menu=function(n){o.path(n)},e.$on("$routeChangeSuccess",function(){"/empresas"===o.path()?n.currentMenuIndex=1:"/solicitacao"===o.path()?n.currentMenuIndex=0:"/estagios"===o.path()?n.currentMenuIndex=2:n.currentMenuIndex=-1,e.isLogin="/login"===o.path()})}n.$inject=["$scope","$rootScope","$location"],angular.module("afrmApp").controller("MainController",n)}(),function(){"use strict";function n(n,e){n.when("/login",{templateUrl:"app/components/login/login.html",controller:"LoginController"}).when("/solicitacao",{templateUrl:"app/components/solicitation/solicitation.html",controller:"SolicitationController"}).when("/empresas",{templateUrl:"app/components/companies/companies.html",controller:"CompaniesController"}).when("/estagios",{templateUrl:"app/components/internships/internships.html",controller:"InternshipsController"}).when("/registro",{templateUrl:"app/components/login/register.html",controller:"RegisterController"}).otherwise({redirectTo:"/login"}),e.html5Mode(!0)}angular.module("afrmApp").config(["$routeProvider","$locationProvider",n])}(),function(){"use strict";function n(n,e,o){n.showDialog=function(o){e.show({controller:"ManageCompanyController",templateUrl:"app/shared/templates/modals/manage-company.html",parent:angular.element(document.body),locals:{company:o||null},clickOutsideToClose:!0}).then(function(e,o){e&&(o?n.companies.push(e):n.companies.forEach(function(n){n._id===e._id&&(n=e)}))},function(){})},function(){o.get().success(function(e){n.companies=e}).error(function(n){console.log(n)})}()}angular.module("afrmApp").controller("CompaniesController",n),n.$inject=["$scope","$mdDialog","companiesService"]}(),function(){"use strict";function n(n){n.approveSolicitation=function(){},n.insertSolicitation=function(){}}angular.module("afrmApp").controller("HomeController",n),n.$inject=["$scope"]}(),function(){"use strict";function n(n,e,o){n.showDialog=function(n){e.show({controller:"InternshipDialogController",templateUrl:"app/shared/templates/modals/internship-dialog.html",parent:angular.element(document.body),locals:{internship:n||null},clickOutsideToClose:!0}).then(function(){console.log("ok")},function(){})},n.search=function(e){var t={credentialId:n.credential._id};e.name&&(t.name=e.name.trim()),e.status&&"Todos"!==e.status.trim()&&(t.status=e.status.trim()),o.get(t).success(function(e){n.internships=e}).error(function(n){console.log(n)})},function(){var e={};n.query={},n.status=["Todos","Aprovado","Em andamento","Reprovado","Cancelado","Aguardando aprovação"],n.credential=JSON.parse(window.localStorage.getItem("CREDENTIAL")),n.isStudent="student"===n.credential.role,e={credentialId:n.credential._id},o.get(e).success(function(e){n.internships=e}).error(function(n){console.log(n)})}()}angular.module("afrmApp").controller("InternshipsController",n),n.$inject=["$scope","$mdDialog","internshipsService"]}(),function(){"use strict";function n(n,e,o){n.login=function(n,t){var r={email:n,password:t};e.login(r).success(function(n){n&&(window.localStorage.setItem("CREDENTIAL",JSON.stringify(n)),o.path("/estagios"))}).error(function(n){console.log(n)})},function(){console.log("logincontroller")}()}angular.module("afrmApp").controller("LoginController",n),n.$inject=["$scope","credentialsService","$location"]}(),function(){"use strict";function n(n,e,o,t,r){n.createAccount=function(n){e.create(n).success(function(n){n&&(t.show(t.simple().textContent("Usuário criado com sucesso").position("bottom").hideDelay(3e3)),r(function(){o("/login")},3e3))}).error(function(n){console.log(n)})}}angular.module("afrmApp").controller("RegisterController",n),n.$inject=["$scope","credentialsService","$location","$mdToast","$timeout"]}(),function(){"use strict";function n(n){n.approveSolicitation=function(){},n.insertSolicitation=function(){}}angular.module("afrmApp").controller("SolicitationController",n),n.$inject=["$scope"]}(),function(){"use strict";function n(n,e){var o="companies";this.create=function(t){return n.post(e.serverUrl+o,t)},this.update=function(t){return n.put(e.serverUrl+o,t)},this.get=function(){return n.get(e.serverUrl+o)}}n.$inject=["$http","$rootScope"],angular.module("afrmApp").service("companiesService",n)}(),function(){"use strict";function n(n,e){var o="credentials";this.login=function(t){var r="?email="+t.email+"&password="+t.password;return n.get(e.serverUrl+o+"/"+r)},this.create=function(t){return n.post(e.serverUrl+o,t)},this.logout=function(t){return n.get(e.serverUrl+o+"/"+t)}}n.$inject=["$http","$rootScope"],angular.module("afrmApp").service("credentialsService",n)}(),function(){"use strict";function n(n,e){var o="internships";this.get=function(t){var r=e.serverUrl+o+"/?";return t.credentialId&&(r+="credentialId="+t.credentialId),t.status&&(r+="&status="+t.status),t.name&&(r+="&name="+t.name),n.get(r)}}n.$inject=["$http","$rootScope"],angular.module("afrmApp").service("internshipsService",n)}(),function(){"use strict";function n(n,e,o){n.save=function(n){return n},function(){n.internship=o.internship||{}}()}n.$inject=["$scope","$mdDialog","locals"],angular.module("afrmApp").controller("InternshipDialogController",n)}(),function(){"use strict";function n(n,e,o,t){n.save=function(t){var r;n.isLoadingCompany=!0,n.isEditing?(r=!1,o.update(t).success(function(o){n.isLoadingCompany=!1,e.hide(o,r)}).error(function(e){n.isLoadingCompany=!1,console.log(e)})):(r=!0,o.create(t).success(function(o){n.isLoadingCompany=!1,e.hide(o,r)}).error(function(e){n.isLoadingCompany=!1,console.log(e)}))},function(){t.company&&(n.isEditing=!0),n.company=t.company||{}}()}n.$inject=["$scope","$mdDialog","companiesService","locals"],angular.module("afrmApp").controller("ManageCompanyController",n)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC1tb2R1bGUuanMiLCJhcHAtY29udHJvbGxlci5qcyIsImFwcC1yb3V0ZXMuanMiLCJjb21wb25lbnRzL2NvbXBhbmllcy9jb21wYW5pZXMuY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2ludGVybnNoaXBzL2ludGVybnNoaXBzLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2luL3JlZ2lzdGVyLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL3NvbGljaXRhdGlvbi9zb2xpY2l0YXRpb24uY29udHJvbGxlci5qcyIsInNoYXJlZC9zZXJ2aWNlcy9jb21wYW5pZXMuc2VydmljZS5qcyIsInNoYXJlZC9zZXJ2aWNlcy9jcmVkZW50aWFscy5zZXJ2aWNlLmpzIiwic2hhcmVkL3NlcnZpY2VzL2ludGVybnNoaXBzLnNlcnZpY2UuanMiLCJzaGFyZWQvdGVtcGxhdGVzL21vZGFscy9pbnRlcm5zaGlwLmRpYWxvZy5jb250cm9sbGVyLmpzIiwic2hhcmVkL3RlbXBsYXRlcy9tb2RhbHMvbWFuYWdlLWNvbXBhbnkuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJG1kRGF0ZUxvY2FsZVByb3ZpZGVyIiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJtb21lbnQiLCJmb3JtYXQiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsIndhcm5QYWxldHRlIiwiYmFja2dyb3VuZFBhbGV0dGUiLCJNYWluQ29udHJvbGxlciIsIiRzY29wZSIsIiRyb290U2NvcGUiLCIkbG9jYXRpb24iLCJzZXJ2ZXJVcmwiLCJtZW51IiwicGF0aCIsIiRvbiIsImN1cnJlbnRNZW51SW5kZXgiLCJpc0xvZ2luIiwiJGluamVjdCIsImNvbnRyb2xsZXIiLCJBcHBsaWNhdGlvbkNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiaHRtbDVNb2RlIiwiQ29tcGFuaWVzQ29udHJvbGxlciIsIiRtZERpYWxvZyIsImNvbXBhbmllc1NlcnZpY2UiLCJzaG93RGlhbG9nIiwiY29tcGFueSIsInNob3ciLCJwYXJlbnQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJib2R5IiwibG9jYWxzIiwiY2xpY2tPdXRzaWRlVG9DbG9zZSIsInRoZW4iLCJpc05ld0NvbXBhbnkiLCJjb21wYW5pZXMiLCJwdXNoIiwiZm9yRWFjaCIsImNvbXAiLCJfaWQiLCJnZXQiLCJzdWNjZXNzIiwiZXJyb3IiLCJyZWFzb24iLCJjb25zb2xlIiwibG9nIiwiSG9tZUNvbnRyb2xsZXIiLCJhcHByb3ZlU29saWNpdGF0aW9uIiwiaW5zZXJ0U29saWNpdGF0aW9uIiwiSW50ZXJuc2hpcHNDb250cm9sbGVyIiwiaW50ZXJuc2hpcHNTZXJ2aWNlIiwiaW50ZXJuc2hpcCIsInNlYXJjaCIsInF1ZXJ5IiwicSIsImNyZWRlbnRpYWxJZCIsImNyZWRlbnRpYWwiLCJuYW1lIiwidHJpbSIsInN0YXR1cyIsImludGVybnNoaXBzIiwiSlNPTiIsInBhcnNlIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImlzU3R1ZGVudCIsInJvbGUiLCJMb2dpbkNvbnRyb2xsZXIiLCJjcmVkZW50aWFsc1NlcnZpY2UiLCJsb2dpbiIsImVtYWlsIiwicGFzcyIsInBhc3N3b3JkIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsIlJlZ2lzdGVyQ29udHJvbGxlciIsIiRtZFRvYXN0IiwiJHRpbWVvdXQiLCJjcmVhdGVBY2NvdW50IiwidXNyIiwiY3JlYXRlIiwicmVzdWx0Iiwic2ltcGxlIiwidGV4dENvbnRlbnQiLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsIlNvbGljaXRhdGlvbkNvbnRyb2xsZXIiLCJDb21wYW5pZXNTZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwicG9zdCIsInVwZGF0ZSIsInB1dCIsInNlcnZpY2UiLCJDcmVkZW50aWFsc1NlcnZpY2UiLCJxdWVyeXN0cmluZyIsImxvZ291dCIsInRva2VuIiwiSW50ZXJuc2hpcHNTZXJ2aWNlIiwidXJsIiwiSW50ZXJuc2hpcERpYWxvZ0NvbnRyb2xsZXIiLCJzYXZlIiwiTWFuYWdlQ29tcGFueUNvbnRyb2xsZXIiLCJpc0xvYWRpbmdDb21wYW55IiwiaXNFZGl0aW5nIiwiY29tcGFueUVkaXRlZCIsImhpZGUiLCJuZXdDb21wYW55Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBR0FBLFNBQUFDLE9BQUEsV0FDQSxhQUNBLFlBQ0EsVUFDQSxpQkFDQSxrQkFHQUMsUUFBQSxxQkFBQSx3QkFBQSxTQUFBQyxFQUFBQyxHQUdBQSxFQUFBQyxXQUFBLFNBQUFDLEdBQ0EsTUFBQUMsUUFBQUQsR0FBQUUsT0FBQSxlQUlBTCxFQUNBTSxNQUFBLFVBQ0FDLGVBQUEsUUFDQUMsY0FBQSxRQUNBQyxZQUFBLE9BQ0FDLGtCQUFBLGNDekJBLFdBQ0EsWUFXQSxTQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxHQUdBRCxFQUFBRSxVQUFBLHNDQUVBSCxFQUFBSSxLQUFBLFNBQUFDLEdBQ0FILEVBQUFHLEtBQUFBLElBR0FKLEVBQUFLLElBQUEsc0JBQUEsV0FFQSxjQUFBSixFQUFBRyxPQUNBTCxFQUFBTyxpQkFBQSxFQUVBLGlCQUFBTCxFQUFBRyxPQUNBTCxFQUFBTyxpQkFBQSxFQUVBLGNBQUFMLEVBQUFHLE9BQ0FMLEVBQUFPLGlCQUFBLEVBR0FQLEVBQUFPLG9CQUVBTixFQUFBTyxRQUFBLFdBQUFOLEVBQUFHLFNBL0JBTixFQUFBVSxTQUNBLFNBQUEsYUFBQSxhQUlBeEIsUUFBQUMsT0FBQSxXQUFBd0IsV0FBQSxpQkFBQVgsTUNUQSxXQUNBLFlBSUEsU0FBQVksR0FBQUMsRUFBQUMsR0FDQUQsRUFFQUUsS0FBQSxVQUNBQyxZQUFBLGtDQUNB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LE1DakJBLFdBRUEsWUFFQSxTQUFBRSxHQUFBckcsRUFBQW9CLEVBQUFDLEVBQUFRLEdBRUE3QixFQUFBb0csS0FBQSxTQUFBN0UsR0FDQSxHQUFBUyxFQUVBaEMsR0FBQXNHLGtCQUFBLEVBR0F0RyxFQUFBdUcsV0FDQXZFLEdBQUEsRUFDQVgsRUFBQXFFLE9BQUFuRSxHQUNBZ0IsUUFBQSxTQUFBaUUsR0FDQXhHLEVBQUFzRyxrQkFBQSxFQUNBbEYsRUFBQXFGLEtBQUFELEVBQUF4RSxLQUVBUSxNQUFBLFNBQUFDLEdBQ0F6QyxFQUFBc0csa0JBQUEsRUFDQTVELFFBQUFDLElBQUFGLE9BTUFULEdBQUEsRUFDQVgsRUFBQTBELE9BQUF4RCxHQUNBZ0IsUUFBQSxTQUFBbUUsR0FDQTFHLEVBQUFzRyxrQkFBQSxFQUNBbEYsRUFBQXFGLEtBQUFDLEVBQUExRSxLQUVBUSxNQUFBLFNBQUFDLEdBQ0F6QyxFQUFBc0csa0JBQUEsRUFDQTVELFFBQUFDLElBQUFGLE9BS0EsV0FHQVosRUFBQU4sVUFDQXZCLEVBQUF1RyxXQUFBLEdBRUF2RyxFQUFBdUIsUUFBQU0sRUFBQU4sZUFLQThFLEVBQUE1RixTQUFBLFNBQUEsWUFBQSxtQkFBQSxVQUVBeEIsUUFBQUMsT0FBQSxXQUFBd0IsV0FBQSwwQkFBQTJGIiwiZmlsZSI6ImFmcm0ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvLyBNb2R1bGUgZGVwZW5kZW5jaWVzIGluamVjdGlvblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnLCBbXHJcbiAgICAgICAgJ25nTWF0ZXJpYWwnLFxyXG4gICAgICAgICduZ0FuaW1hdGUnLFxyXG4gICAgICAgICduZ1JvdXRlJyxcclxuICAgICAgICAnYW5ndWxhci5maWx0ZXInLFxyXG4gICAgICAgICdtZC5kYXRhLnRhYmxlJ1xyXG4gICAgXSlcclxuXHJcbiAgICAgICAgLmNvbmZpZyhmdW5jdGlvbiAoJG1kVGhlbWluZ1Byb3ZpZGVyLCAkbWREYXRlTG9jYWxlUHJvdmlkZXIpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIERhdGUgZm9ybWF0IGNvbmZpZ3VyYXRpb25cclxuICAgICAgICAgICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLmZvcm1hdERhdGUgPSBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gVGhlbWUgY29uZmlndXJhdGlvblxyXG4gICAgICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXJcclxuICAgICAgICAgICAgICAgIC50aGVtZSgnZm9yZXN0JylcclxuICAgICAgICAgICAgICAgIC5wcmltYXJ5UGFsZXR0ZSgnYmx1ZScpXHJcbiAgICAgICAgICAgICAgICAuYWNjZW50UGFsZXR0ZSgndGVhbCcpXHJcbiAgICAgICAgICAgICAgICAud2FyblBhbGV0dGUoJ3JlZCcpXHJcbiAgICAgICAgICAgICAgICAuYmFja2dyb3VuZFBhbGV0dGUoJ2dyZXknKTtcclxuICAgICAgICB9KTtcclxuXHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLy8gaW5qZWN0aW5nIGRlcGVuZGVuY2llc1xyXG4gICAgTWFpbkNvbnRyb2xsZXIuJGluamVjdCA9IFtcclxuICAgICAgICAnJHNjb3BlJywgJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJ1xyXG4gICAgXTtcclxuXHJcbiAgICAvLyByZWdpc3RlcmluZyBvbiBhbmd1bGFyXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgTWFpbkNvbnRyb2xsZXIpO1xyXG5cclxuICAgIC8vIE1haW4gQ29udHJvbGxlclxyXG4gICAgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJHNjb3BlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24pIHtcclxuXHJcbiAgICAgICAgLy8gJHJvb3RTY29wZS5zZXJ2ZXJVcmwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwLyc7XHJcbiAgICAgICAgJHJvb3RTY29wZS5zZXJ2ZXJVcmwgPSAnaHR0cHM6Ly9kZXYtc2lzdGVtYXMuaGVyb2t1YXBwLmNvbS8nO1xyXG5cclxuICAgICAgICAkc2NvcGUubWVudSA9IGZ1bmN0aW9uKHBhdGgpIHtcclxuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgocGF0aCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoJGxvY2F0aW9uLnBhdGgoKSA9PT0gJy9lbXByZXNhcycpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudE1lbnVJbmRleCA9MTtcclxuXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCRsb2NhdGlvbi5wYXRoKCkgPT09ICcvc29saWNpdGFjYW8nKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRNZW51SW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgZWxzZSBpZiAoJGxvY2F0aW9uLnBhdGgoKSA9PT0gJy9lc3RhZ2lvcycpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudE1lbnVJbmRleCA9IDI7XHJcblxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudE1lbnVJbmRleCA9IC0xO1xyXG5cclxuICAgICAgICAgICAgJHJvb3RTY29wZS5pc0xvZ2luID0gJGxvY2F0aW9uLnBhdGgoKSA9PT0gJy9sb2dpbicgPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxufSgpKTtcclxuIiwiKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgQXBwbGljYXRpb25Db25maWddKTtcclxuXHJcbiAgICBmdW5jdGlvbiBBcHBsaWNhdGlvbkNvbmZpZygkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuICAgICAgICAkcm91dGVQcm92aWRlclxyXG5cclxuICAgICAgICAgICAgLndoZW4oJy9sb2dpbicsIHtcclxuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVVybCcgOiAnYXBwL2NvbXBvbmVudHMvbG9naW4vbG9naW4uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcicgIDogJ0xvZ2luQ29udHJvbGxlcidcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC53aGVuKCcvc29saWNpdGFjYW8nLCB7XHJcbiAgICAgICAgICAgICAgICAndGVtcGxhdGVVcmwnIDogJ2FwcC9jb21wb25lbnRzL3NvbGljaXRhdGlvbi9zb2xpY2l0YXRpb24uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcicgIDogJ1NvbGljaXRhdGlvbkNvbnRyb2xsZXInXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAud2hlbignL2VtcHJlc2FzJywge1xyXG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJyA6ICdhcHAvY29tcG9uZW50cy9jb21wYW5pZXMvY29tcGFuaWVzLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsZXInICA6ICdDb21wYW5pZXNDb250cm9sbGVyJ1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLndoZW4oJy9lc3RhZ2lvcycsIHtcclxuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVVybCcgOiAnYXBwL2NvbXBvbmVudHMvaW50ZXJuc2hpcHMvaW50ZXJuc2hpcHMuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAnY29udHJvbGxlcicgIDogJ0ludGVybnNoaXBzQ29udHJvbGxlcidcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC53aGVuKCcvcmVnaXN0cm8nLCB7XHJcbiAgICAgICAgICAgICAgICAndGVtcGxhdGVVcmwnIDogJ2FwcC9jb21wb25lbnRzL2xvZ2luL3JlZ2lzdGVyLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsZXInICA6ICdSZWdpc3RlckNvbnRyb2xsZXInXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAub3RoZXJ3aXNlKHtcclxuICAgICAgICAgICAgICAgICdyZWRpcmVjdFRvJzogJy9sb2dpbidcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxuICAgIH1cclxufSgpKTsiLCIoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignQ29tcGFuaWVzQ29udHJvbGxlcicsIENvbXBhbmllc0NvbnRyb2xsZXIpO1xyXG5cclxuICAgIENvbXBhbmllc0NvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScsICckbWREaWFsb2cnLCAnY29tcGFuaWVzU2VydmljZScgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBDb21wYW5pZXNDb250cm9sbGVyKCRzY29wZSwgJG1kRGlhbG9nLCBjb21wYW5pZXNTZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgIC8vIGNyaWEgb3UgZWRpdGEgY29tcGFueVxyXG4gICAgICAgICRzY29wZS5zaG93RGlhbG9nID0gZnVuY3Rpb24oY29tcGFueSkge1xyXG5cclxuICAgICAgICAgICAgJG1kRGlhbG9nLnNob3coe1xyXG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsZXInOiAnTWFuYWdlQ29tcGFueUNvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgJ3RlbXBsYXRlVXJsJzogJ2FwcC9zaGFyZWQvdGVtcGxhdGVzL21vZGFscy9tYW5hZ2UtY29tcGFueS5odG1sJyxcclxuICAgICAgICAgICAgICAgICdwYXJlbnQnOiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXHJcbiAgICAgICAgICAgICAgICAnbG9jYWxzJzogeyAnY29tcGFueSc6IGNvbXBhbnkgfHwgbnVsbCB9LFxyXG4gICAgICAgICAgICAgICAgJ2NsaWNrT3V0c2lkZVRvQ2xvc2UnOnRydWVcclxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihjb21wYW55LCBpc05ld0NvbXBhbnkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb21wYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmV3Q29tcGFueSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbXBhbmllcy5wdXNoKGNvbXBhbnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29tcGFuaWVzLmZvckVhY2goZnVuY3Rpb24oY29tcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAuX2lkID09PSBjb21wYW55Ll9pZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wID0gIGNvbXBhbnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHt9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbXBhbmllc1NlcnZpY2UuZ2V0KClcclxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGNvbXBhbmllcykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jb21wYW5pZXMgPSBjb21wYW5pZXM7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KCkpO1xyXG4gICAgfVxyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLCBIb21lQ29udHJvbGxlcik7XHJcblxyXG4gICAgSG9tZUNvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBIb21lQ29udHJvbGxlcigkc2NvcGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFwcHJvdmVTb2xpY2l0YXRpb24gPSAgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5pbnNlcnRTb2xpY2l0YXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSgpKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ0ludGVybnNoaXBzQ29udHJvbGxlcicsIEludGVybnNoaXBzQ29udHJvbGxlcik7XHJcblxyXG4gICAgSW50ZXJuc2hpcHNDb250cm9sbGVyLiRpbmplY3QgPSBbICckc2NvcGUnLCAnJG1kRGlhbG9nJywgJ2ludGVybnNoaXBzU2VydmljZScgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBJbnRlcm5zaGlwc0NvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2csIGludGVybnNoaXBzU2VydmljZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUuc2hvd0RpYWxvZyA9IGZ1bmN0aW9uKGludGVybnNoaXApIHtcclxuXHJcbiAgICAgICAgICAgICRtZERpYWxvZy5zaG93KHtcclxuICAgICAgICAgICAgICAgICdjb250cm9sbGVyJzogJ0ludGVybnNoaXBEaWFsb2dDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZVVybCc6ICdhcHAvc2hhcmVkL3RlbXBsYXRlcy9tb2RhbHMvaW50ZXJuc2hpcC1kaWFsb2cuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAncGFyZW50JzogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxyXG4gICAgICAgICAgICAgICAgJ2xvY2Fscyc6IHsgJ2ludGVybnNoaXAnOiBpbnRlcm5zaGlwIHx8IG51bGwgfSxcclxuICAgICAgICAgICAgICAgICdjbGlja091dHNpZGVUb0Nsb3NlJzp0cnVlXHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb2snKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7fSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uKHF1ZXJ5KSB7XHJcbiAgICAgICAgICAgIHZhciBxID0geydjcmVkZW50aWFsSWQnOiAkc2NvcGUuY3JlZGVudGlhbC5faWR9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHF1ZXJ5Lm5hbWUpXHJcbiAgICAgICAgICAgICAgICBxLm5hbWUgPSBxdWVyeS5uYW1lLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChxdWVyeS5zdGF0dXMgJiYgcXVlcnkuc3RhdHVzLnRyaW0oKSAhPT0gJ1RvZG9zJylcclxuICAgICAgICAgICAgICAgIHEuc3RhdHVzID0gcXVlcnkuc3RhdHVzLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgIGludGVybnNoaXBzU2VydmljZS5nZXQocSlcclxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGludGVybnNoaXBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludGVybnNoaXBzID0gaW50ZXJuc2hpcHM7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0ge307XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUucXVlcnkgPSB7fTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSBbJ1RvZG9zJywgJ0Fwcm92YWRvJywgJ0VtIGFuZGFtZW50bycsICdSZXByb3ZhZG8nLCAnQ2FuY2VsYWRvJywgJ0FndWFyZGFuZG8gYXByb3Zhw6fDo28nXTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jcmVkZW50aWFsID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0NSRURFTlRJQUwnKSk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuaXNTdHVkZW50ID0gJHNjb3BlLmNyZWRlbnRpYWwucm9sZSA9PT0gJ3N0dWRlbnQnID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcXVlcnkgPSB7J2NyZWRlbnRpYWxJZCc6ICRzY29wZS5jcmVkZW50aWFsLl9pZH07XHJcblxyXG4gICAgICAgICAgICBpbnRlcm5zaGlwc1NlcnZpY2UuZ2V0KHF1ZXJ5KVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oaW50ZXJuc2hpcHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJuc2hpcHMgPSBpbnRlcm5zaGlwcztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVhc29uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KCkpO1xyXG4gICAgfVxyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgTG9naW5Db250cm9sbGVyKTtcclxuXHJcbiAgICBMb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScsICdjcmVkZW50aWFsc1NlcnZpY2UnLCAnJGxvY2F0aW9uJyBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIExvZ2luQ29udHJvbGxlcigkc2NvcGUsIGNyZWRlbnRpYWxzU2VydmljZSwgJGxvY2F0aW9uKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKGVtYWlsLCBwYXNzKSB7XHJcbiAgICAgICAgICAgIHZhciBjcmVkZW50aWFsID0ge1xyXG4gICAgICAgICAgICAgICAgJ2VtYWlsJzogZW1haWwsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjcmVkZW50aWFsc1NlcnZpY2UubG9naW4oY3JlZGVudGlhbClcclxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdDUkVERU5USUFMJywgSlNPTi5zdHJpbmdpZnkoY3JlZGVudGlhbCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2VzdGFnaW9zJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2dpbmNvbnRyb2xsZXInKTtcclxuICAgICAgICB9KCkpO1xyXG4gICAgfVxyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgUmVnaXN0ZXJDb250cm9sbGVyKTtcclxuXHJcbiAgICBSZWdpc3RlckNvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScsICdjcmVkZW50aWFsc1NlcnZpY2UnLCAnJGxvY2F0aW9uJywgJyRtZFRvYXN0JywgJyR0aW1lb3V0JyBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJlZ2lzdGVyQ29udHJvbGxlcigkc2NvcGUsIGNyZWRlbnRpYWxzU2VydmljZSwgJGxvY2F0aW9uLCAkbWRUb2FzdCwgJHRpbWVvdXQpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNyZWF0ZUFjY291bnQgPSBmdW5jdGlvbih1c3IpIHtcclxuICAgICAgICAgICAgY3JlZGVudGlhbHNTZXJ2aWNlLmNyZWF0ZSh1c3IpXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnVXN1w6FyaW8gY3JpYWRvIGNvbSBzdWNlc3NvJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ2JvdHRvbScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbignL2xvZ2luJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH1cclxufSgpKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLmNvbnRyb2xsZXIoJ1NvbGljaXRhdGlvbkNvbnRyb2xsZXInLCBTb2xpY2l0YXRpb25Db250cm9sbGVyKTtcclxuXHJcbiAgICBTb2xpY2l0YXRpb25Db250cm9sbGVyLiRpbmplY3QgPSBbICckc2NvcGUnIF07XHJcblxyXG4gICAgZnVuY3Rpb24gU29saWNpdGF0aW9uQ29udHJvbGxlcigkc2NvcGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFwcHJvdmVTb2xpY2l0YXRpb24gPSAgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5pbnNlcnRTb2xpY2l0YXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgfSgpKTtcclxuXHJcbiAgICB9XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGZ1bmN0aW9uIENvbXBhbmllc1NlcnZpY2UoJGh0dHAsICRyb290U2NvcGUpIHtcclxuXHJcbiAgICAgICAgdmFyIG1vZHVsZSA9ICdjb21wYW5pZXMnO1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uIChjb21wYW55KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCRyb290U2NvcGUuc2VydmVyVXJsICsgbW9kdWxlLCBjb21wYW55KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uIChjb21wYW55KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wdXQoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUsIGNvbXBhbnkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCRyb290U2NvcGUuc2VydmVyVXJsICsgbW9kdWxlKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIENvbXBhbmllc1NlcnZpY2UuJGluamVjdCA9IFsgJyRodHRwJywgJyRyb290U2NvcGUnIF07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5zZXJ2aWNlKCdjb21wYW5pZXNTZXJ2aWNlJywgQ29tcGFuaWVzU2VydmljZSk7XHJcblxyXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGZ1bmN0aW9uIENyZWRlbnRpYWxzU2VydmljZSgkaHR0cCwgJHJvb3RTY29wZSkge1xyXG5cclxuICAgICAgICB2YXIgbW9kdWxlID0gJ2NyZWRlbnRpYWxzJztcclxuXHJcbiAgICAgICAgdGhpcy5sb2dpbiA9IGZ1bmN0aW9uIChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeXN0cmluZyA9ICc/ZW1haWw9JyArIGNyZWRlbnRpYWwuZW1haWwgKyAnJnBhc3N3b3JkPScgKyBjcmVkZW50aWFsLnBhc3N3b3JkO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgkcm9vdFNjb3BlLnNlcnZlclVybCArIG1vZHVsZSArICcvJyArIHF1ZXJ5c3RyaW5nKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZSA9ICBmdW5jdGlvbih1c3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJHJvb3RTY29wZS5zZXJ2ZXJVcmwgKyBtb2R1bGUsIHVzcik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2dvdXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgkcm9vdFNjb3BlLnNlcnZlclVybCArIG1vZHVsZSArICcvJyArIHRva2VuKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIENyZWRlbnRpYWxzU2VydmljZS4kaW5qZWN0ID0gWyAnJGh0dHAnLCAnJHJvb3RTY29wZScgXTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYWZybUFwcCcpLnNlcnZpY2UoJ2NyZWRlbnRpYWxzU2VydmljZScsIENyZWRlbnRpYWxzU2VydmljZSk7XHJcblxyXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGZ1bmN0aW9uIEludGVybnNoaXBzU2VydmljZSgkaHR0cCwgJHJvb3RTY29wZSkge1xyXG5cclxuICAgICAgICB2YXIgbW9kdWxlID0gJ2ludGVybnNoaXBzJztcclxuXHJcbiAgICAgICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAocXVlcnkpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICRyb290U2NvcGUuc2VydmVyVXJsICsgbW9kdWxlICsgJy8/JztcclxuXHJcbiAgICAgICAgICAgIGlmIChxdWVyeS5jcmVkZW50aWFsSWQpXHJcbiAgICAgICAgICAgICAgICB1cmwgKz0gJ2NyZWRlbnRpYWxJZD0nICsgcXVlcnkuY3JlZGVudGlhbElkO1xyXG5cclxuICAgICAgICAgICAgaWYgKHF1ZXJ5LnN0YXR1cylcclxuICAgICAgICAgICAgICAgIHVybCArPSAnJnN0YXR1cz0nICsgcXVlcnkuc3RhdHVzO1xyXG5cclxuICAgICAgICAgICAgaWYgKHF1ZXJ5Lm5hbWUpXHJcbiAgICAgICAgICAgICAgICB1cmwgKz0gJyZuYW1lPScgKyBxdWVyeS5uYW1lO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgSW50ZXJuc2hpcHNTZXJ2aWNlLiRpbmplY3QgPSBbICckaHR0cCcsICckcm9vdFNjb3BlJyBdO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhZnJtQXBwJykuc2VydmljZSgnaW50ZXJuc2hpcHNTZXJ2aWNlJywgSW50ZXJuc2hpcHNTZXJ2aWNlKTtcclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZnVuY3Rpb24gSW50ZXJuc2hpcERpYWxvZ0NvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2csIGxvY2Fscykge1xyXG5cclxuICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKGludGVybnNoaXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGludGVybnNoaXA7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5pbnRlcm5zaGlwID0gbG9jYWxzLmludGVybnNoaXAgfHwge307XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBJbnRlcm5zaGlwRGlhbG9nQ29udHJvbGxlci4kaW5qZWN0ID0gWyAnJHNjb3BlJywgJyRtZERpYWxvZycsICdsb2NhbHMnIF07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdJbnRlcm5zaGlwRGlhbG9nQ29udHJvbGxlcicsIEludGVybnNoaXBEaWFsb2dDb250cm9sbGVyKTtcclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZnVuY3Rpb24gTWFuYWdlQ29tcGFueUNvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2csIGNvbXBhbmllc1NlcnZpY2UsIGxvY2Fscykge1xyXG5cclxuICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKGNvbXBhbnkpIHtcclxuICAgICAgICAgICAgdmFyIGlzTmV3Q29tcGFueTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmdDb21wYW55ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vIHB1dFxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmlzRWRpdGluZykge1xyXG4gICAgICAgICAgICAgICAgaXNOZXdDb21wYW55ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb21wYW5pZXNTZXJ2aWNlLnVwZGF0ZShjb21wYW55KVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChjb21wYW55RWRpdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmdDb21wYW55ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKGNvbXBhbnlFZGl0ZWQsIGlzTmV3Q29tcGFueSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNMb2FkaW5nQ29tcGFueSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBwb3N0XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXNOZXdDb21wYW55ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbXBhbmllc1NlcnZpY2UuY3JlYXRlKGNvbXBhbnkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKG5ld0NvbXBhbnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzTG9hZGluZ0NvbXBhbnkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmhpZGUobmV3Q29tcGFueSwgaXNOZXdDb21wYW55KTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmdDb21wYW55ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIGVkaXRhIG91IGNyaWEgZW1wcmVzYVxyXG4gICAgICAgICAgICBpZiAobG9jYWxzLmNvbXBhbnkpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNFZGl0aW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jb21wYW55ID0gbG9jYWxzLmNvbXBhbnkgfHwge307XHJcblxyXG4gICAgICAgIH0pKCk7XHJcbiAgICB9XHJcblxyXG4gICAgTWFuYWdlQ29tcGFueUNvbnRyb2xsZXIuJGluamVjdCA9IFsgJyRzY29wZScsICckbWREaWFsb2cnLCAnY29tcGFuaWVzU2VydmljZScsICdsb2NhbHMnIF07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Fmcm1BcHAnKS5jb250cm9sbGVyKCdNYW5hZ2VDb21wYW55Q29udHJvbGxlcicsIE1hbmFnZUNvbXBhbnlDb250cm9sbGVyKTtcclxuXHJcbn0oKSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
